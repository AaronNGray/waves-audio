!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.createScheduler=e()}}(function(){return function e(t,n,i){function u(s,l){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var o=n[s]={exports:{}};t[s][0].call(o.exports,function(e){var n=t[s][1][e];return u(n?n:e)},o,o.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)u(i[s]);return u}({1:[function(e,t){var n=e("event-queue"),i=function(e){"use strict";var t={isRunning:{writable:!0,enumerable:!0,value:!1},name:{writable:!0,value:"Scheduler"},eventQueue:{writable:!0,value:n()},nextEventTime:{writable:!0,value:1/0},schedulablesList:{writable:!0,value:[]},parent:{writable:!0,value:null},runningStatusChangeCallback:{writable:!0,value:null},init:{enumerable:!0,value:function(e){return e&&(this.name=e),this}},add:{enumerable:!0,value:function(e){if(e&&e.isSchedulable){e.setScheduler(this);var t=this.schedulablesList.push(e),n=t-1,i=e.name?e.name:e.schedulingID;return console.log("add():",this.name,"scheduling element #"+n+' "'+i+'"'),!this.isRunning,this}throw new Error("add(): object must be schedulable")}},remove:{enumerable:!0,value:function(e){if(e){var t=this.schedulablesList.indexOf(e);if(0>t)throw new Error("remove(): object not found,"+e);return this.schedulablesList.splice(t,1),console.log("Unscheduling element #"+t,e.name?'"'+e.name+'"':"",e.schedulingID),this.schedulablesList.length<=0&&this.stop(),this}throw new Error("remove(): no object")}},start:{enumerable:!1,value:function(){this.isRunning||(this.isRunning=!0,console.log("Scheduling on","("+this.name+")"),this.runningStatusChangeCallback(this.isRunning))}},stop:{enumerable:!1,value:function(){this.isRunning=!1,console.log("Scheduling off ("+this.name+")"),this.runningStatusChangeCallback(this.isRunning)}},reset:{enumerable:!1,value:function(){this.eventQueue.flush(),this.insertAll()}},insertAll:{enumerable:!1,value:function(){for(var e=null,t=null,n=this.schedulablesList.length-1;n>=0;n--)t=this.schedulablesList[n],e=t.resetAndReturnNextTime(this.getCurrentTime()),this.eventQueue.pushEvent(t,e);this.eventQueue.sort()}},insertEvent:{enumerable:!0,value:function(e,t){1/0!==t&&this.eventQueue.Insert(e,t)}},getCurrentTime:{enumerable:!0,value:function(){return wako.scheduler.getCurrentTime()}},updateNextTime:{enumerable:!1,value:function(e,t){1/0===t?(this.eventQueue.remove(e),this.eventQueue.length<=0&&this.stop()):(this.eventQueue.indexOf(e)<0?this.eventQueue.insert(e,t):this.eventQueue.move(e,t),this.start())}},setParent:{enumerable:!1,value:function(e,t){this.parent=e,this.runningStatusChangeCallback=t}},makeNextEvent:{enumerable:!0,value:function(){var e=this.eventQueue.getFirstObject();this.nextEventTime=e.makeEventAndReturnNextTime(),this.eventQueue.moveFirstEvent(e,this.nextEventTime)}},getNextTime:{enumerable:!0,value:function(){return this.schedulablesList.length>0?(this.nextEventTime=this.eventQueue.getFirstValue(),this.nextEventTime):1/0}}},i=Object.create({},t);return i.init(e)};t.exports=i},{"event-queue":2}],2:[function(e,t){var n=function(){"use strict";var e={eventList:{writable:!0,value:[]},name:{writable:!0,value:"EventQueue"},length:{enumerable:!0,get:function(){return this.eventList.length}},isBackward:{writable:!0,value:!1},init:{enumerable:!1,value:function(){return this}},insert:{enumerable:!0,value:function(e,t){this.pushEvent(e,t),this.sort()}},pushEvent:{enumerable:!0,value:function(e,t){this.eventList.push([e,t])}},remove:{enumerable:!0,value:function(e){if(e){var t=this.indexOf(e);if(0>t)throw new Error("remove(): no object");return this.eventList.splice(t,1),this}throw new ReferenceError("remove(): no object")}},move:{enumerable:!0,value:function(e,t){this.remove(e),this.insert(e,t)}},moveFirstEvent:{enumerable:!0,value:function(e,t){this.isBackward?t>this.getValueOfIndex(1)?this.eventList[0][1]=t:(this.eventList.shift(),this.insert(e,t)):t<=this.getValueOfIndex(1)?this.eventList[0][1]=t:(this.eventList.shift(),this.insert(e,t))}},getFirstEvent:{enumerable:!0,value:function(){return this.eventList[0]}},getFirstObject:{enumerable:!0,value:function(){return this.eventList[0][0]}},getFirstValue:{enumerable:!0,value:function(){return this.eventList[0][1]}},getValueOfIndex:{enumerable:!0,value:function(e){return this.eventList[e]?this.eventList[e][1]:1/0}},flush:{enumerable:!0,value:function(){this.eventList=[]}},sort:{enumerable:!1,value:function(){this.eventList.sort(this.isBackward?this.reverseCompare:this.compare)}},compare:{enumerable:!1,value:function(e,t){return e[1]-t[1]}},reverseCompare:{enumerable:!1,value:function(e,t){return t[1]-e[1]}},indexOf:{enumerable:!1,value:function(e){var t=null;for(t=0;t<this.eventList.length;t++)if(e===this.eventList[t][0])return t;return-1}}},t=Object.create({},e);return t.init()};t.exports=n},{}]},{},[1])(1)});