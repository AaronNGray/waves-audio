!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.AudioPlayer=e()}}(function(){return function e(t,i,n){function s(_,r){if(!i[_]){if(!t[_]){var u="function"==typeof require&&require;if(!r&&u)return u(_,!0);if(o)return o(_,!0);throw new Error("Cannot find module '"+_+"'")}var a=i[_]={exports:{}};t[_][0].call(a.exports,function(e){var i=t[_][1][e];return s(i?i:e)},a,a.exports,e,t,i,n)}return i[_].exports}for(var o="function"==typeof require&&require,_=0;_<n.length;_++)s(n[_]);return s}({1:[function(e,t){"use strict";var i=e("audio-context"),n=function(){function e(){var e=arguments[0];void 0===e&&(e=null),this.transport=null,this.buffer=e,this.fadeTime=.005,this.__time=0,this.__position=0,this.__speed=0,this.__cyclic=!1,this.__bufferSource=null,this.__envNode=null,this.__playingSpeed=1,this.__gainNode=i.createGain(),this.outputNode=this.__gainNode}function t(e){if(e!==this.__speed){var t=this.__sync();0===this.__speed?this.__start(e):0===e?this.__stop():this.__speed*e<0?(this.__stop(),this.__start(e)):this.__bufferSource&&this.__bufferSource.playbackRate.setValueAtTime(e,t),this.__speed=e}}function n(){return this.__speed}function s(e){e!==this.__cyclic&&(this.__sync(),this.__stop(),this.__cyclic=e,this.__start(this.__speed))}function o(){return this.__cyclic}function _(){var e=this.__sync();this.__gainNode.cancelScheduledValues(e),this.__gainNode.setValueAtTime(this.__gainNode.gain.value,e),this.__gainNode.linearRampToValueAtTime(0,e+this.fadeTime)}function r(){return this.__gainNode.gain.value}function u(e){e>=0?.0625>e?e=.0625:e>16&&(e=16):-16>e?e=-16:e>-.0625&&(e=-.0625),this.__playingSpeed=e,0!==this.__speed&&(this.speed=e)}function a(){return this.__playingSpeed}var f=Object.defineProperty;return Object.defineProperties(e.prototype,{speed:{get:n,set:t,configurable:!0,enumerable:!0},cyclic:{get:o,set:s,configurable:!0,enumerable:!0},gain:{get:r,set:_,configurable:!0,enumerable:!0},playingSpeed:{get:a,set:u,configurable:!0,enumerable:!0}}),f(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e.prototype.__sync=function(){if(this.transport)this.__position=this.transport.position,this.__time=this.transport.time;else{var e=i.currentTime;this.__position+=(e-this.__time)*this.__speed,this.__time=e}return this.__time},e.prototype.__start=function(e){if(this.buffer){var t=this.__time,n=this.__position;this.__cyclic&&(n%=this.buffer.duration),n>=0&&n<this.buffer.duration&&e>0&&(this.__envNode=i.createGain(),this.__envNode.gain.setValueAtTime(0,t),this.__envNode.gain.linearRampToValueAtTime(1,t+this.fadeTime),this.__envNode.connect(this.__gainNode),this.__bufferSource=i.createBufferSource(),this.__bufferSource.buffer=this.buffer,this.__bufferSource.playbackRate.value=e,this.__bufferSource.loop=this.__cyclic,this.__bufferSource.start(t,n),this.__bufferSource.connect(this.__envNode))}},e.prototype.__stop=function(){if(this.__bufferSource){var e=this.__time;this.__envNode.gain.cancelScheduledValues(e),this.__envNode.gain.setValueAtTime(this.__envNode.gain.value,e),this.__envNode.gain.linearRampToValueAtTime(0,e+this.fadeTime),this.__bufferSource.stop(e+this.fadeTime),this.__bufferSource=null,this.__envNode=null}},e.prototype.seek=function(e){e!==this.__position&&(this.__sync(),this.__stop(),this.__position=e,this.__start(this.__speed))},e.prototype.startPlaying=function(){var e=arguments[0];void 0===e&&(e=null);var t=arguments[1];void 0===t&&(t=null),e&&this.seek(e),t&&(this.playingSpeed=t),this.speed=this.playingSpeed},e.prototype.pausePlaying=function(){this.speed=0},e.prototype.stopPlaying=function(){this.speed=0,this.seek(0)},e.prototype.connect=function(e){this.__gainNode.connect(e)},e.prototype.disconnect=function(e){this.__gainNode.disconnect(e)},e}();t.exports=n},{"audio-context":2}],2:[function(e,t){var i=window.audioContext||new AudioContext||new webkitAudioContext;window.audioContext=i,t.exports=i},{}]},{},[1])(1)});