!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.scheduler=e()}}(function(){return function e(t,n,i){function r(s,u){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=n[s]={exports:{}};t[s][0].call(a.exports,function(e){var n=t[s][1][e];return r(n?n:e)},a,a.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t){var n=window.audioContext||new AudioContext||new webkitAudioContext;window.audioContext=n,t.exports=n},{}],2:[function(e,t){"use strict";var n=e("../audio-context"),i=e("../time-engine"),r=function(){function e(){this.__objects=[],this.__times=[],this.__currentTime=null,this.__timeout=null,this.period=.025,this.lookahead=.1}function t(){return this.__currentTime||n.currentTime+this.lookahead}var r=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),o=Object.getOwnPropertyDescriptor,s=function(e,t){for(var n in t)t.hasOwnProperty(n)&&r(e,n,o(t,n));return e},u=Object.defineProperties,c={};return u(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.__insertEngine=function(e,t){this.__objects.push(e),this.__times.push(t)},c.__moveEngine=function(e,t){var n=this.__objects.indexOf(e);n>=0&&(1/0!==t?this.__times[n]=t:(this.__objects.splice(n,1),this.__times.splice(n,1)))},c.__withdrawEngine=function(e){var t=this.__objects.indexOf(e);t>=0&&(this.__objects.splice(t,1),this.__times.splice(t,1))},c.__reschedule=function(){this.__objects.length>0?this.__timeout||this.__tick():this.__timeout&&(clearTimeout(this.__timeout),this.__timeout=null)},c.__tick=function(){for(var e=this,t=0;t<this.__objects.length;){for(var i=this.__objects[t],r=this.__times[t];r<=n.currentTime+this.lookahead;){var o=Math.max(r,n.currentTime);this.__currentTime=r,r+=Math.max(i.advanceTime(r,o),0)}1/0!==r?this.__times[t++]=r:this.__withdrawEngine(i)}this.__currentTime=null,this.__timeout=null,this.__objects.length>0&&(this.__timeout=setTimeout(function(){e.__tick()},1e3*this.period))},c.callback=function(e){var t=arguments[1];void 0===t&&(t=0);var n={executeNext:function(t,n){return e(t,n),1/0}};return this.__insertEngine(n,this.currentTime+t),this.__reschedule(),n},c.repeat=function(e){var t=arguments[1];void 0===t&&(t=1);var n=arguments[2];void 0===n&&(n=0);var i={period:t,advanceTime:function(t){return e(t),t+this.period}};return this.__insertEngine(i,this.currentTime+n),this.__reschedule(),i},c.add=function(e){var t=arguments[1];void 0===t&&(t=0);var n=arguments[2];void 0===n&&(n=null);var r=this;if(e.master)throw new Error("object has already been added to a master");if(!i.implementsScheduled(e))throw new Error("object cannot be added to scheduler");e.setScheduled(this,function(t){r.__nextTime=r.__queue.move(e,t),r.__reschedule()},function(){return r.currentTime},n),this.__insertEngine(e,this.currentTime+t),this.__reschedule()},c.remove=function(e){if(e.master===this)throw new Error("object has not been added to this scheduler");e.resetScheduled(),this.__withdrawEngine(e),this.__reschedule()},c.reset=function(e,t){if(!this.__objects.indexOf(e))throw new Error("object has not been added to this scheduler");this.__moveEngine(e,t),this.__reschedule()},s(e.prototype,c),c=void 0,e}();t.exports=new r},{"../audio-context":1,"../time-engine":3}],3:[function(e,t){"use strict";var n=e("../audio-context"),i=function(){function e(){this.master=null,this.interface=null,this.transportStartPosition=0,this.outputNode=null}function t(){return n.currentTime}function i(){return 0}var r=Object.defineProperty,o=function(e,t){for(var n in t)t.hasOwnProperty(n)&&r(e,n,Object.getOwnPropertyDescriptor(t,n));return e},s={};return Object.defineProperties(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0},currentPosition:{get:i,configurable:!0,enumerable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.resetNextTime=function(){var e=arguments[0];void 0===e&&(e=null)},s.resetNextPosition=function(){var e=arguments[0];void 0===e&&(e=null)},s.__setGetters=function(e,t){e&&Object.defineProperty(this,"currentTime",{configurable:!0,get:e,set:function(){}}),t&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:t,set:function(){}})},s.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},s.setScheduled=function(e,t,n,i){this.master=e,this.interface="scheduled",this.__setGetters(n,i),t&&(this.resetNextTime=t)},s.resetScheduled=function(){this.__deleteGetters(),delete this.resetNextTime,this.master=null,this.interface=null},s.setTransported=function(e,t,n,i,r){this.master=e,this.interface="transported",this.transportStartPosition=t,this.__setGetters(i,r),n&&(this.resetNextPosition=n)},s.resetTransported=function(){this.__deleteGetters(),delete this.resetNextPosition,this.transportStartPosition=0,this.master=null,this.interface=null},s.setSpeedControlled=function(e,t,n){this.master=e,this.interface="speed-controlled",this.__setGetters(t,n)},s.resetSpeedControlled=function(){this.__deleteGetters(),this.master=null,this.interface=null},s.removeFromMaster=function(){this.master&&this.master.remove(this)},s.connect=function(e){return this.outputNode.connect(e),this},s.disconnect=function(e){return this.outputNode.disconnect(e),this},o(e.prototype,s),s=void 0,e}();i.implementsScheduled=function(e){return e.advanceTime&&e.advanceTime instanceof Function},i.implementsTransported=function(e){return e.syncPosition&&e.syncPosition instanceof Function&&e.advancePosition&&e.advancePosition instanceof Function},i.implementsSpeedControlled=function(e){return e.syncSpeed&&e.syncSpeed instanceof Function},t.exports=i},{"../audio-context":1}]},{},[2])(2)});