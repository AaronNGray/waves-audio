!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.PlayControl=e()}}(function(){return function e(t,o,n){function i(s,u){if(!o[s]){if(!t[s]){var _="function"==typeof require&&require;if(!u&&_)return _(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=o[s]={exports:{}};t[s][0].call(c.exports,function(e){var o=t[s][1][e];return i(o?o:e)},c,c.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(){!function(){"use strict";function e(e){e&&(e.setTargetAtTime||(e.setTargetAtTime=e.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var t=this.internal_createGain();return e(t.gain),t},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(t){var o=t?this.internal_createDelay(t):this.internal_createDelay();return e(o.delayTime),o},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();return t.start||(t.start=function(e,t,o){t||o?this.noteGrainOn(e,t,o):this.noteOn(e)}),t.stop||(t.stop=t.noteOff),e(t.playbackRate),t},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();return e(t.threshold),e(t.knee),e(t.ratio),e(t.reduction),e(t.attack),e(t.release),t},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();return e(t.frequency),e(t.detune),e(t.Q),e(t.gain),t},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();return t.start||(t.start=t.noteOn),t.stop||(t.stop=t.noteOff),t.setPeriodicWave||(t.setPeriodicWave=t.setWaveTable),e(t.frequency),e(t.detune),t}))}(window)},{}],2:[function(e,t){e("./ac-monkeypatch"),t.exports=new AudioContext},{"./ac-monkeypatch":1}],3:[function(e,t){"use strict";var o=function(){function e(){this.__objects=[],this.reverse=!1}function t(){return this.__objects[0][0]}function o(){return this.__objects[0][1]}var n=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),i=Object.getOwnPropertyDescriptor,r=function(e,t){for(var o in t)t.hasOwnProperty(o)&&n(e,o,i(t,o));return e},s=Object.defineProperties,u={};return s(e.prototype,{head:{get:t,configurable:!0,enumerable:!0},time:{get:o,configurable:!0,enumerable:!0}}),n(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.__objectIndex=function(e){for(var t=0;t<this.__objects.length;t++)if(e===this.__objects[t][0])return t;return-1},u.__removeObject=function(e){var t=this.__objectIndex(e);return t>=0&&this.__objects.splice(t,1),this.__objects.length>0?this.__objects[0][1]:1/0},u.__sortObjects=function(){this.reverse?this.__objects.sort(function(e,t){return t[1]-e[1]}):this.__objects.sort(function(e,t){return e[1]-t[1]})},u.insert=function(e,t){var o=arguments[2];return void 0===o&&(o=!0),1/0!==t&&t!=-1/0?(this.__objects.push([e,t]),o&&this.__sortObjects(),this.__objects[0][1]):this.__removeObject(e)},u.move=function(e,t){if(1/0!==t&&t!=-1/0){var o=this.__objectIndex(e);return 0>o?this.__objects.push([e,t]):this.__objects[o][1]=t,this.__sortObjects(),this.__objects[0][1]}return this.__removeObject(e)},u.remove=function(e){return this.__removeObject(e)},u.clear=function(){return this.__objects.length=0,1/0},r(e.prototype,u),u=void 0,e}();t.exports=o},{}],4:[function(e,t){t.exports=e(1)},{}],5:[function(e,t){t.exports=e(2)},{"./ac-monkeypatch":4}],6:[function(e,t){"use strict";var o=e("audio-context"),n=function(){function e(){this.interface=null,this.outputNode=null}function t(){return o.currentTime}function n(){return 0}var i=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),r=Object.getOwnPropertyDescriptor,s=function(e,t){for(var o in t)t.hasOwnProperty(o)&&i(e,o,r(t,o));return e},u=Object.defineProperties,_={};return u(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0},currentPosition:{get:n,configurable:!0,enumerable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),_.resetNextTime=function(){var e=arguments[0];void 0===e&&(e=null)},_.resetNextPosition=function(){var e=arguments[0];void 0===e&&(e=null)},_.__setGetters=function(e,t){e&&Object.defineProperty(this,"currentTime",{configurable:!0,get:e,set:function(){}}),t&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:t,set:function(){}})},_.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},_.connect=function(e){return this.outputNode.connect(e),this},_.disconnect=function(e){return this.outputNode.disconnect(e),this},s(e.prototype,_),_=void 0,e}();n.implementsScheduled=function(e){return e.advanceTime&&e.advanceTime instanceof Function},n.implementsTransported=function(e){return e.syncPosition&&e.syncPosition instanceof Function&&e.advancePosition&&e.advancePosition instanceof Function},n.implementsSpeedControlled=function(e){return e.syncSpeed&&e.syncSpeed instanceof Function},n.setScheduled=function(e,t,o,n){e.interface="scheduled",e.__setGetters(o,n),t&&(e.resetNextTime=t)},n.setTransported=function(e,t,o,n){e.interface="transported",e.__setGetters(o,n),t&&(e.resetNextPosition=t)},n.setSpeedControlled=function(e,t,o){e.interface="speed-controlled",e.__setGetters(t,o)},n.resetInterface=function(e){e.__deleteGetters(),delete e.resetNextTime,delete e.resetNextPosition,e.interface=null},t.exports=n},{"audio-context":5}],7:[function(e,t){"use strict";function o(e,t){var o=e.indexOf(t);return o>=0?(e.splice(o,1),!0):!1}var n=e("audio-context"),i=e("priority-queue"),r=e("time-engine"),s=function(){function e(){this.__queue=new i,this.__engines=[],this.__currentTime=null,this.__nextTime=1/0,this.__timeout=null,this.period=.025,this.lookahead=.1}function t(){return this.__currentTime||n.currentTime+this.lookahead}var s=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),u=Object.getOwnPropertyDescriptor,_=function(e,t){for(var o in t)t.hasOwnProperty(o)&&s(e,o,u(t,o));return e},c=Object.defineProperties,a={};return c(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0}}),s(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a.__tick=function(){var e=this.__nextTime;for(this.__timeout=null;e<=n.currentTime+this.lookahead;){this.__currentTime=e;var t=this.__queue.head,o=t.advanceTime(this.__currentTime);e=o?this.__queue.move(t,Math.max(o,this.__currentTime)):this.__queue.time}this.__currentTime=null,this.__reschedule(e)},a.__reschedule=function(e){var t=this;if(this.__timeout&&(clearTimeout(this.__timeout),this.__timeout=null),1/0!==e){this.__nextTime=e;var o=Math.max(e-n.currentTime-this.lookahead,this.period);this.__timeout=setTimeout(function(){t.__tick()},1e3*o)}},a.callback=function(e){var t=arguments[1];void 0===t&&(t=0);var o=arguments[2];void 0===o&&(o=0);var n={period:o||1/0,advanceTime:function(t){return e(t),t+this.period}},i=this.__queue.insert(n,this.currentTime+t);return this.__reschedule(i),n},a.add=function(e){var t=arguments[1];void 0===t&&(t=0);var o=arguments[2];void 0===o&&(o=null);var n=this;if(e.interface)throw new Error("object has already been added to a master");if(!r.implementsScheduled(e))throw new Error("object cannot be added to scheduler");this.__engines.push(e),r.setScheduled(e,function(t){var o=n.__queue.move(e,t);n.__reschedule(o)},function(){return n.currentTime},o);var i=this.__queue.insert(e,this.currentTime+t);return this.__reschedule(i),e},a.remove=function(e){if(!o(this.__engines,e))throw new Error("object has not been added to this scheduler");r.resetInterface(e);var t=this.__queue.remove(e);this.__reschedule(t)},a.reset=function(e,t){var o=this.__queue.move(e,t);this.__reschedule(o)},_(e.prototype,a),a=void 0,e}();t.exports=new s},{"audio-context":2,"priority-queue":3,"time-engine":6}],8:[function(e,t){t.exports=e(1)},{}],9:[function(e,t){t.exports=e(2)},{"./ac-monkeypatch":8}],10:[function(e,t){t.exports=e(6)},{"audio-context":9}],11:[function(e,t){"use strict";var o=function(e,t){return e.__proto__={a:t},e.a===t}({},{}),n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(e,t){for(var o in t)t.hasOwnProperty(o)&&n(e,o,i(t,o));return e},s=Object.setPrototypeOf||function(e,t){return o?e.__proto__=t:n(e,"__proto__",{value:t,configurable:!0,enumerable:!1,writable:!0}),e},u=Object.create,_=e("time-engine"),c=e("scheduler"),a=function(e){function t(t){e.call(this),this.__playControl=t}o||r(t,e);var i={};return null!==e&&s(t,e),t.prototype=u(null!==e?e.prototype:null,{constructor:{value:t,configurable:!0,writable:!0}}),n(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),i.advanceTime=function(e){var t=this.__playControl,o=t.__getPositionAtTime(e),n=t.__engine.advancePosition(e,o,t.__speed);return 1/0!==n?t.__getTimeAtPosition(n):1/0},r(t.prototype,i),i=void 0,t}(_),p=function(e){function t(t){e.call(this),this.__playControl=t,this.position=null,this.speed=null,this.seek=!1}o||r(t,e);var i={};return null!==e&&s(t,e),t.prototype=u(null!==e?e.prototype:null,{constructor:{value:t,configurable:!0,writable:!0}}),n(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),i.advanceTime=function(e){return this.__playControl.syncSpeed(e,this.position,this.speed,this.seek),null},r(t.prototype,i),i=void 0,t}(_),l=function(e){function t(t){var o=this;if(e.call(this),this.__engine=null,this.__schedulerHook=null,this.__loopControl=null,this.__loopStart=-1/0,this.__loopEnd=1/0,this.__time=0,this.__position=0,this.__speed=0,this.__nextPosition=1/0,this.__playingSpeed=1,t.master)throw new Error("object has already been added to a master");var n=(this.__speed,function(){return o.currentTime}),i=function(){return o.currentPosition};if(_.implementsSpeedControlled(t))this.__engine=t,_.setSpeedControlled(t,n,i);else if(_.implementsTransported(t))this.__engine=t,_.setTransported(t,0,function(){var e=arguments[0];if(void 0===e&&(e=null),null===e){var n=c.currentTime,i=o.__getPositionAtTime(n);e=t.syncPosition(n,i,o.__speed)}o.__resetNextPosition(e)},n,i);else{if(!_.implementsScheduled(t))throw new Error("object cannot be added to play control");this.__engine=t,c.add(t,1/0,i)}}function i(){return c.currentTime}function l(){return this.__position+(c.currentTime-this.__time)*this.__speed}function h(e){e?this.__loopStart<this.__loopEnd&&(this.__loopControl=new p(this),c.add(this.__loopControl,1/0)):this.__loopControl&&(c.remove(this.__loopControl),this.__loopControl=null)}function d(){return!!this.__loopControl}function f(e){var t=this.__sync();e>=0?.0625>e?e=.0625:e>16&&(e=16):-16>e?e=-16:e>-.0625&&(e=-.0625),this.__playingSpeed=e,0!==this.__speed&&this.syncSpeed(t,this.__position,e)}function y(){return this.__playingSpeed}o||r(t,e);var m={};return null!==e&&s(t,e),t.prototype=u(null!==e?e.prototype:null,{constructor:{value:t,configurable:!0,writable:!0},currentTime:{get:i,configurable:!0,enumerable:!0},currentPosition:{get:l,configurable:!0,enumerable:!0},loop:{get:d,set:h,configurable:!0,enumerable:!0},speed:{get:y,set:f,configurable:!0,enumerable:!0}}),n(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),m.__getTimeAtPosition=function(e){return this.__time+(e-this.__position)/this.__speed},m.__getPositionAtTime=function(e){return this.__position+(e-this.__time)*this.__speed},m.__sync=function(){var e=this.currentTime;return this.__position+=(e-this.__time)*this.__speed,this.__time=e,e},m.__resetNextPosition=function(e){this.__schedulerHook&&this.__schedulerHook.resetNextTime(this.__getTimeAtPosition(e)),this.__nextPosition=e},m.setLoopBoundaries=function(e,t){this.__loopStart=e,this.__loopEnd=t,this.loop=this.loop},m.__applyLoopBoundaries=function(e,t){if(this.__loopControl){if(t>0&&e>=this.__loopEnd)return this.__loopStart+(e-this.__loopStart)%(this.__loopEnd-this.__loopStart);if(0>t&&e<this.__loopStart)return this.__loopEnd-(this.__loopEnd-e)%(this.__loopEnd-this.__loopStart)}return e},m.__rescheduleLoopControl=function(e,t){this.__loopControl&&(t>0?(this.__loopControl.position=this.__loopStart,this.__loopControl.speed=t,this.__loopControl.seek=!0,c.reset(this.__loopControl,this.__getTimeAtPosition(this.__loopEnd))):0>t?(this.__loopControl.position=this.__loopEnd,this.__loopControl.speed=t,this.__loopControl.seek=!0,c.reset(this.__loopControl,this.__getTimeAtPosition(this.__loopStart))):c.reset(this.__loopControl,1/0))},m.syncSpeed=function(e,t,o){var n=arguments[3];void 0===n&&(n=!1);var i=this.__speed;if(o!==i||n){switch((n||0===i)&&(t=this.__applyLoopBoundaries(t,o)),this.__time=e,this.__position=t,this.__speed=o,this.__engine.interface){case"speed-controlled":this.__engine.syncSpeed(e,t,o,n);break;case"transported":var r=this.__nextPosition;n?r=this.__engine.syncPosition(e,t,o):0===i?(r=this.__engine.syncPosition(e,t,o),this.__schedulerHook=new a(this),c.add(this.__schedulerHook,1/0)):0===o?(r=1/0,this.__engine.syncSpeed&&this.__engine.syncSpeed(e,t,0),c.remove(this.__schedulerHook),this.__schedulerHook=null):0>o*i?r=this.__engine.syncPosition(e,t,o):this.__engine.syncSpeed&&this.__engine.syncSpeed(e,t,o),this.__resetNextPosition(r);break;case"scheduled":0===i?this.__scheduledEngine.resetNextTime(0):0===o&&this.__scheduledEngine.resetNextTime(1/0)}this.__rescheduleLoopControl(t,o)}},m.start=function(){var e=this.__sync();this.syncSpeed(e,this.__position,this.__playingSpeed)},m.pause=function(){var e=this.__sync();this.syncSpeed(e,this.__position,0)},m.stop=function(){var e=this.__sync();this.syncSpeed(e,this.__position,0),this.seek(0)},m.seek=function(e){if(e!==this.__position){var t=this.__sync();this.__position=e,this.syncSpeed(t,e,this.__speed,!0)}},m.clear=function(){var e=this.__sync();this.syncSpeed(e,this.__position,0),this.__engine.resetInterface()},r(t.prototype,m),m=void 0,t}(_);t.exports=l},{scheduler:7,"time-engine":10}]},{},[11])(11)});