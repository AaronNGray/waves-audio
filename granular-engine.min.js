!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.GranularEngine=e()}}(function(){return function e(t,n,i){function r(u,a){if(!n[u]){if(!t[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<i.length;u++)r(i[u]);return r}({1:[function(e,t){"use strict";var n=e("audio-context"),i=e("time-engine"),r=function(e){function t(){var t=arguments[0];void 0===t&&(t=null),e.call(this),this.buffer=t,this.periodAbs=.01,this.periodRel=0,this.periodVar=0,this.position=0,this.positionVar=.003,this.durationAbs=.1,this.durationRel=0,this.attackAbs=0,this.attackRel=.5,this.releaseAbs=0,this.releaseRel=.5,this.resampling=0,this.resamplingVar=0,this.centered=!0,this.cyclic=!1,this.outputNode=this.__gainNode=n.createGain()}function i(){var e=this.buffer.duration;return this.buffer.wrapAroundExtention&&(e-=this.buffer.wrapAroundExtention),e}function r(){return this.bufferDuration}function o(e){this.__gainNode.gain.value=e}function u(){return this.__gainNode.gain.value}var a=function(e,t){return e.__proto__={a:t},e.a===t}({},{}),s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,f=function(e,t){for(var n in t)t.hasOwnProperty(n)&&s(e,n,c(t,n));return e},l=Object.setPrototypeOf||function(e,t){return a?e.__proto__=t:s(e,"__proto__",{value:t,configurable:!0,enumerable:!1,writable:!0}),e},d=Object.create;a||f(t,e);var p={};return null!==e&&l(t,e),t.prototype=d(null!==e?e.prototype:null,{constructor:{value:t,configurable:!0,writable:!0},bufferDuration:{get:i,configurable:!0,enumerable:!0},playbackLength:{get:r,configurable:!0,enumerable:!0},gain:{get:u,set:o,configurable:!0,enumerable:!0}}),s(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),p.advanceTime=function(e){return e+this.trigger(e)},p.trigger=function(e){var t=e||n.currentTime,i=this.periodAbs,r=this.position+this.currentPosition,o=this.durationAbs;if(this.buffer){var u=1;if(0!==this.resampling||this.resamplingVar>0){var a=2*(Math.random()-.5)*this.resamplingVar;u=Math.pow(2,(this.resampling+a)/1200)}i+=this.periodRel*o,o+=this.durationRel*i,this.periodVar>0&&(i+=2*(Math.random()-.5)*this.periodVar*i),this.centered&&(r-=.5*o),this.positionVar>0&&(r+=(2*Math.random()-1)*this.positionVar);var s=this.bufferDuration;if(0>r||r>=s)if(this.cyclic){var c=r/s;r=(c-Math.floor(c))*s,r+o>this.buffer.duration&&(o=this.buffer.duration-r)}else 0>r&&(t-=r,o+=r,r=0),r+o>s&&(o=s-r);if(this.gain>0&&o>=.001){var f=n.createGain(),l=this.attackAbs+this.attackRel*o,d=this.releaseAbs+this.releaseRel*o;if(l+d>o){var p=o/(l+d);l*=p,d*=p}var h=t+l,b=t+o,g=b-d;f.gain.setValueAtTime(0,t),f.gain.linearRampToValueAtTime(1,h),g>h&&f.gain.setValueAtTime(1,g),f.gain.linearRampToValueAtTime(0,b),f.connect(this.__gainNode);var m=n.createBufferSource();m.buffer=this.buffer,m.playbackRate.value=u,m.connect(f),f.connect(this.__gainNode),m.start(t,r),m.stop(t+o/u)}}return i},f(t.prototype,p),p=void 0,t}(i);t.exports=r},{"audio-context":2,"time-engine":3}],2:[function(e,t){var n=window.audioContext||new AudioContext||new webkitAudioContext;window.audioContext=n,t.exports=n},{}],3:[function(e,t){"use strict";var n=e("audio-context"),i=function(){function e(){this.interface=null,this.outputNode=null}function t(){return n.currentTime}function i(){return 0}var r=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),o=Object.getOwnPropertyDescriptor,u=function(e,t){for(var n in t)t.hasOwnProperty(n)&&r(e,n,o(t,n));return e},a=Object.defineProperties,s={};return a(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0},currentPosition:{get:i,configurable:!0,enumerable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.resetNextTime=function(){var e=arguments[0];void 0===e&&(e=null)},s.resetNextPosition=function(){var e=arguments[0];void 0===e&&(e=null)},s.__setGetters=function(e,t){e&&Object.defineProperty(this,"currentTime",{configurable:!0,get:e,set:function(){}}),t&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:t,set:function(){}})},s.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},s.connect=function(e){return this.outputNode.connect(e),this},s.disconnect=function(e){return this.outputNode.disconnect(e),this},u(e.prototype,s),s=void 0,e}();i.implementsScheduled=function(e){return e.advanceTime&&e.advanceTime instanceof Function},i.implementsTransported=function(e){return e.syncPosition&&e.syncPosition instanceof Function&&e.advancePosition&&e.advancePosition instanceof Function},i.implementsSpeedControlled=function(e){return e.syncSpeed&&e.syncSpeed instanceof Function},i.setScheduled=function(e,t,n,i){e.interface="scheduled",e.__setGetters(n,i),t&&(e.resetNextTime=t)},i.setTransported=function(e,t,n,i){e.interface="transported",e.__setGetters(n,i),t&&(e.resetNextPosition=t)},i.setSpeedControlled=function(e,t,n){e.interface="speed-controlled",e.__setGetters(t,n)},i.resetInterface=function(e){e.__deleteGetters(),delete e.resetNextTime,delete e.resetNextPosition,e.interface=null},t.exports=i},{"audio-context":4}],4:[function(e,t){t.exports=e(2)},{}]},{},[1])(1)});