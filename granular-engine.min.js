!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.GranularEngine=e()}}(function(){return function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t){var i=window.audioContext||new AudioContext||new webkitAudioContext;window.audioContext=i,t.exports=i},{}],2:[function(e,t){"use strict";var i=e("../audio-context"),n=e("../time-engine"),r=function(e){function t(){var t=arguments[0];void 0===t&&(t=null),e.call(this),this.buffer=t,this.periodAbs=.01,this.periodRel=0,this.periodVar=0,this.position=0,this.positionVar=.003,this.durationAbs=.1,this.durationRel=0,this.attackAbs=0,this.attackRel=.5,this.releaseAbs=0,this.releaseRel=.5,this.resampling=0,this.resamplingVar=0,this.centered=!0,this.cyclic=!1,this.__phase=0,this.__aligned=!0,this.outputNode=this.__gainNode=i.createGain()}function n(){var e=this.buffer.duration;return this.buffer.wrapAroundExtention&&(e-=this.buffer.wrapAroundExtention),e}function r(){return this.bufferDuration}function o(e){this.__gainNode.gain.value=e}function s(){return this.__gainNode.gain.value}var a=Object.defineProperty,u=function(e,t){for(var i in t)t.hasOwnProperty(i)&&a(e,i,Object.getOwnPropertyDescriptor(t,i));return e};u(t,e);var c={};return t.prototype=Object.create(e.prototype,{constructor:{value:t,configurable:!0,writable:!0},bufferDuration:{get:n,configurable:!0,enumerable:!0},playbackLength:{get:r,configurable:!0,enumerable:!0},gain:{get:s,set:o,configurable:!0,enumerable:!0}}),a(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.advanceTime=function(e){return e+this.trigger(e)},c.trigger=function(e){var t=e||i.currentTime,n=this.periodAbs,r=this.position+this.currentPosition,o=this.durationAbs;if(this.buffer){var s=1;if(0!==this.resampling||this.resamplingVar>0){var a=2*(Math.random()-.5)*this.resamplingVar;s=Math.pow(2,(this.resampling+a)/1200)}n+=this.periodRel*o,o+=this.durationRel*n,this.periodVar>0&&(n+=2*(Math.random()-.5)*this.periodVar*n),this.centered&&(r-=.5*o),this.positionVar>0&&(r+=(2*Math.random()-1)*this.positionVar);var u=this.bufferDuration;if(0>r||r>=u)if(this.cyclic){var c=r/u;r=(c-Math.floor(c))*u,r+o>this.buffer.duration&&(o=this.buffer.duration-r)}else 0>r&&(t-=r,o+=r,r=0),r+o>u&&(o=u-r);if(this.gain>0&&o>=.001){var f=i.createGain(),l=this.attackAbs+this.attackRel*o,h=this.releaseAbs+this.releaseRel*o;if(l+h>o){var d=o/(l+h);l*=d,h*=d}var p=t+l,g=t+o,m=g-h;f.gain.setValueAtTime(0,t),f.gain.linearRampToValueAtTime(1,p),m>p&&f.gain.setValueAtTime(1,m),f.gain.linearRampToValueAtTime(0,g),f.connect(this.__gainNode);var b=i.createBufferSource();b.buffer=this.buffer,b.playbackRate.value=s,b.connect(f),f.connect(this.__gainNode),b.start(t,r),b.stop(t+o/s)}}return n},u(t.prototype,c),c=void 0,t}(n);t.exports=r},{"../audio-context":1,"../time-engine":3}],3:[function(e,t){"use strict";var i=e("../audio-context"),n=function(){function e(){this.master=null,this.interface=null,this.transportStartPosition=0,this.outputNode=null}function t(){return this.advanceTime&&this.advanceTime instanceof Function}function n(){return this.syncPosition&&this.syncPosition instanceof Function&&this.advancePosition&&this.advancePosition instanceof Function}function r(){return this.syncSpeed&&this.syncSpeed instanceof Function}function o(){return i.currentTime}function s(){return 0}var a=Object.defineProperty,u=function(e,t){for(var i in t)t.hasOwnProperty(i)&&a(e,i,Object.getOwnPropertyDescriptor(t,i));return e},c={};return Object.defineProperties(e.prototype,{implementsScheduled:{get:t,configurable:!0,enumerable:!0},implementsTransported:{get:n,configurable:!0,enumerable:!0},implementsSpeedControlled:{get:r,configurable:!0,enumerable:!0},currentTime:{get:o,configurable:!0,enumerable:!0},currentPosition:{get:s,configurable:!0,enumerable:!0}}),a(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.resetEngineTime=function(){},c.resyncEnginePosition=function(){},c.__setGetters=function(e,t){e&&Object.defineProperty(this,"currentTime",{configurable:!0,get:e,set:function(){}}),t&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:t,set:function(){}})},c.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},c.setScheduled=function(e,t,i,n){this.master=e,this.interface="scheduled",this.__setGetters(i,n),t&&(this.resetEngineTime=t)},c.resetScheduled=function(){this.__deleteGetters(),delete this.resetEngineTime,this.master=null,this.interface=null},c.setTransported=function(e,t,i,n,r){this.master=e,this.interface="transported",this.transportStartPosition=t,this.__setGetters(n,r),i&&(this.resyncEnginePosition=i)},c.resetTransported=function(){this.__deleteGetters(),delete this.resyncEnginePosition,this.transportStartPosition=0,this.master=null,this.interface=null},c.setSpeedControlled=function(e,t,i){this.master=e,this.interface="speed-controlled",this.__setGetters(t,i)},c.resetSpeedControlled=function(){this.__deleteGetters(),this.master=null,this.interface=null},c.removeFromMaster=function(){this.master&&this.master.remove(this)},c.connect=function(e){return this.outputNode.connect(e),this},c.disconnect=function(e){return this.outputNode.disconnect(e),this},u(e.prototype,c),c=void 0,e}();t.exports=n},{"../audio-context":1}]},{},[2])(2)});