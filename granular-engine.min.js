!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.GranularEngine=e()}}(function(){return function e(t,r,n){function o(a,u){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var s=r[a]={exports:{}};t[a][0].call(s.exports,function(e){var r=t[a][1][e];return o(r?r:e)},s,s.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t){"use strict";var r=e("audio-context"),n=e("time-engine"),o=function(e){function t(){var t=arguments[0];void 0===t&&(t=null),e.call(this),this.buffer=t,this.periodAbs=.01,this.periodRel=0,this.periodVar=0,this.position=0,this.positionVar=.003,this.durationAbs=.1,this.durationRel=0,this.attackAbs=0,this.attackRel=.5,this.releaseAbs=0,this.releaseRel=.5,this.resampling=0,this.resamplingVar=0,this.centered=!0,this.cyclic=!1,this.outputNode=this.__gainNode=r.createGain()}function n(){var e=this.buffer.duration;return this.buffer.wrapAroundExtention&&(e-=this.buffer.wrapAroundExtention),e}function o(){return this.position}function i(){return this.bufferDuration}function a(e){this.__gainNode.gain.value=e}function u(){return this.__gainNode.gain.value}var c=function(e,t){return e.__proto__={a:t},e.a===t}({},{}),s=Object.defineProperty,p=Object.getOwnPropertyDescriptor,f=function(e,t){for(var r in t)t.hasOwnProperty(r)&&s(e,r,p(t,r));return e},l=Object.setPrototypeOf||function(e,t){return c?e.__proto__=t:s(e,"__proto__",{value:t,configurable:!0,enumerable:!1,writable:!0}),e},d=Object.create;c||f(t,e);var h={};return null!==e&&l(t,e),t.prototype=d(null!==e?e.prototype:null,{constructor:{value:t,configurable:!0,writable:!0},bufferDuration:{get:n,configurable:!0,enumerable:!0},currentPosition:{get:o,configurable:!0,enumerable:!0},playbackLength:{get:i,configurable:!0,enumerable:!0},gain:{get:u,set:a,configurable:!0,enumerable:!0}}),s(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),h.advanceTime=function(e){return e+this.trigger(e)},h.trigger=function(e){var t=e||r.currentTime,n=this.periodAbs,o=this.currentPosition,i=this.durationAbs;if(this.buffer){var a=1;if(0!==this.resampling||this.resamplingVar>0){var u=2*(Math.random()-.5)*this.resamplingVar;a=Math.pow(2,(this.resampling+u)/1200)}n+=this.periodRel*i,i+=this.durationRel*n,this.periodVar>0&&(n+=2*(Math.random()-.5)*this.periodVar*n),this.centered&&(o-=.5*i),this.positionVar>0&&(o+=(2*Math.random()-1)*this.positionVar);var c=this.bufferDuration;if(0>o||o>=c)if(this.cyclic){var s=o/c;o=(s-Math.floor(s))*c,o+i>this.buffer.duration&&(i=this.buffer.duration-o)}else 0>o&&(t-=o,i+=o,o=0),o+i>c&&(i=c-o);if(this.gain>0&&i>=.001){var p=r.createGain(),f=this.attackAbs+this.attackRel*i,l=this.releaseAbs+this.releaseRel*i;if(f+l>i){var d=i/(f+l);f*=d,l*=d}var h=t+f,y=t+i,m=y-l;p.gain.setValueAtTime(0,t),p.gain.linearRampToValueAtTime(1,h),m>h&&p.gain.setValueAtTime(1,m),p.gain.linearRampToValueAtTime(0,y),p.connect(this.__gainNode);var b=r.createBufferSource();b.buffer=this.buffer,b.playbackRate.value=a,b.connect(p),p.connect(this.__gainNode),b.start(t,o),b.stop(t+i/a)}}return n},f(t.prototype,h),h=void 0,t}(n);t.exports=o},{"audio-context":3,"time-engine":6}],2:[function(){!function(){"use strict";function e(e){e&&(e.setTargetAtTime||(e.setTargetAtTime=e.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var t=this.internal_createGain();return e(t.gain),t},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(t){var r=t?this.internal_createDelay(t):this.internal_createDelay();return e(r.delayTime),r},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();return t.start||(t.start=function(e,t,r){t||r?this.noteGrainOn(e,t,r):this.noteOn(e)}),t.stop||(t.stop=t.noteOff),e(t.playbackRate),t},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();return e(t.threshold),e(t.knee),e(t.ratio),e(t.reduction),e(t.attack),e(t.release),t},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();return e(t.frequency),e(t.detune),e(t.Q),e(t.gain),t},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();return t.start||(t.start=t.noteOn),t.stop||(t.stop=t.noteOff),t.setPeriodicWave||(t.setPeriodicWave=t.setWaveTable),e(t.frequency),e(t.detune),t}))}(window)},{}],3:[function(e,t){e("./ac-monkeypatch"),t.exports=new AudioContext},{"./ac-monkeypatch":2}],4:[function(e,t){t.exports=e(2)},{}],5:[function(e,t){t.exports=e(3)},{"./ac-monkeypatch":4}],6:[function(e,t){"use strict";var r=e("audio-context"),n=function(){function e(){this.interface=null,this.outputNode=null}function t(){return r.currentTime}function n(){return 0}var o=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),i=Object.getOwnPropertyDescriptor,a=function(e,t){for(var r in t)t.hasOwnProperty(r)&&o(e,r,i(t,r));return e},u=Object.defineProperties,c={};return u(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0},currentPosition:{get:n,configurable:!0,enumerable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.resetNextTime=function(){var e=arguments[0];void 0===e&&(e=null)},c.resetNextPosition=function(){var e=arguments[0];void 0===e&&(e=null)},c.__setGetters=function(e,t){e&&Object.defineProperty(this,"currentTime",{configurable:!0,get:e,set:function(){}}),t&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:t,set:function(){}})},c.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},c.connect=function(e){return this.outputNode.connect(e),this},c.disconnect=function(e){return this.outputNode.disconnect(e),this},a(e.prototype,c),c=void 0,e}();n.implementsScheduled=function(e){return e.advanceTime&&e.advanceTime instanceof Function},n.implementsTransported=function(e){return e.syncPosition&&e.syncPosition instanceof Function&&e.advancePosition&&e.advancePosition instanceof Function},n.implementsSpeedControlled=function(e){return e.syncSpeed&&e.syncSpeed instanceof Function},n.setScheduled=function(e,t,r,n){e.interface="scheduled",e.__setGetters(r,n),t&&(e.resetNextTime=t)},n.setTransported=function(e,t,r,n){e.interface="transported",e.__setGetters(r,n),t&&(e.resetNextPosition=t)},n.setSpeedControlled=function(e,t,r){e.interface="speed-controlled",e.__setGetters(t,r)},n.resetInterface=function(e){e.__deleteGetters(),delete e.resetNextTime,delete e.resetNextPosition,e.interface=null},t.exports=n},{"audio-context":5}]},{},[1])(1)});