!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.PlayerEngine=e()}}(function(){return function e(t,i,n){function r(s,u){if(!i[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=i[s]={exports:{}};t[s][0].call(a.exports,function(e){var i=t[s][1][e];return r(i?i:e)},a,a.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t){var i=window.audioContext||new AudioContext||new webkitAudioContext;window.audioContext=i,t.exports=i},{}],2:[function(e,t){"use strict";var i=e("../audio-context"),n=e("../time-engine"),r=function(e){function t(){var e=arguments[0];void 0===e&&(e=null),this.transport=null,this.buffer=e,this.fadeTime=.005,this.__time=0,this.__position=0,this.__speed=0,this.__cyclic=!1,this.__bufferSource=null,this.__envNode=null,this.__playingSpeed=1,this.outputNode=this.__gainNode=i.createGain()}function n(e){if(e!==this.__cyclic){var t=this.getSchedulerTime(),i=this.getTransportPosition();this.__halt(t),this.__cyclic=e,0!==this.__speed&&this.__start(t,i,this.__speed)}}function r(){return this.__cyclic}function o(){var e=this.__sync();this.__gainNode.cancelScheduledValues(e),this.__gainNode.setValueAtTime(this.__gainNode.gain.value,e),this.__gainNode.linearRampToValueAtTime(0,e+this.fadeTime)}function s(){return this.__gainNode.gain.value}var u=Object.defineProperty,c=function(e,t){for(var i in t)t.hasOwnProperty(i)&&u(e,i,Object.getOwnPropertyDescriptor(t,i));return e};c(t,e);var a={};return t.prototype=Object.create(e.prototype,{constructor:{value:t,configurable:!0,writable:!0},cyclic:{get:r,set:n,configurable:!0,enumerable:!0},gain:{get:s,set:o,configurable:!0,enumerable:!0}}),u(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a.__start=function(e,t,n){if(this.buffer){var r=this.buffer.duration;if(this.buffer.wrapAroundExtension&&(r-=this.buffer.wrapAroundExtension),this.__cyclic&&(0>t||t>=r)){var o=t/r;t=(o-Math.floor(o))*r}t>=0&&r>t&&n>0&&(this.__envNode=i.createGain(),this.__envNode.gain.setValueAtTime(0,e),this.__envNode.gain.linearRampToValueAtTime(1,e+this.fadeTime),this.__envNode.connect(this.__gainNode),this.__bufferSource=i.createBufferSource(),this.__bufferSource.buffer=this.buffer,this.__bufferSource.playbackRate.value=n,this.__bufferSource.loop=this.__cyclic,this.__bufferSource.loopStart=0,this.__bufferSource.loopEnd=r,this.__bufferSource.start(e,t),this.__bufferSource.connect(this.__envNode))}},a.__halt=function(e){this.__bufferSource&&(this.__envNode.gain.cancelScheduledValues(e),this.__envNode.gain.setValueAtTime(this.__envNode.gain.value,e),this.__envNode.gain.linearRampToValueAtTime(0,e+this.fadeTime),this.__bufferSource.stop(e+this.fadeTime),this.__bufferSource=null,this.__envNode=null)},a.syncSpeed=function(e,t,i){var n=arguments[3];void 0===n&&(n=!1);var r=this.__speed;(i!==r||n)&&(n||0>r*i?(this.__halt(e),this.__start(e,t,i)):0===r||n?this.__start(e,t,i):0===i?this.__halt(e):this.__bufferSource&&this.__bufferSource.playbackRate.setValueAtTime(i,e),this.__speed=i)},c(t.prototype,a),a=void 0,t}(n);t.exports=r},{"../audio-context":1,"../time-engine":3}],3:[function(e,t){"use strict";var i=e("../audio-context"),n=function(){function e(){this.interface=null,this.transportStartPosition=0,this.outputNode=null}function t(){return i.currentTime}function n(){return 0}var r=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),o=Object.getOwnPropertyDescriptor,s=function(e,t){for(var i in t)t.hasOwnProperty(i)&&r(e,i,o(t,i));return e},u=Object.defineProperties,c={};return u(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0},currentPosition:{get:n,configurable:!0,enumerable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.resetNextTime=function(){var e=arguments[0];void 0===e&&(e=null)},c.resetNextPosition=function(){var e=arguments[0];void 0===e&&(e=null)},c.__setGetters=function(e,t){e&&Object.defineProperty(this,"currentTime",{configurable:!0,get:e,set:function(){}}),t&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:t,set:function(){}})},c.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},c.setScheduled=function(e,t,i){this.interface="scheduled",this.__setGetters(t,i),e&&(this.resetNextTime=e)},c.setTransported=function(e,t,i,n){this.interface="transported",this.transportStartPosition=e,this.__setGetters(i,n),t&&(this.resetNextPosition=t)},c.setSpeedControlled=function(e,t){this.interface="speed-controlled",this.__setGetters(e,t)},c.resetInterface=function(){this.__deleteGetters(),delete this.resetNextTime,delete this.resetNextPosition,this.transportStartPosition=0,this.interface=null},c.connect=function(e){return this.outputNode.connect(e),this},c.disconnect=function(e){return this.outputNode.disconnect(e),this},s(e.prototype,c),c=void 0,e}();n.implementsScheduled=function(e){return e.advanceTime&&e.advanceTime instanceof Function},n.implementsTransported=function(e){return e.syncPosition&&e.syncPosition instanceof Function&&e.advancePosition&&e.advancePosition instanceof Function},n.implementsSpeedControlled=function(e){return e.syncSpeed&&e.syncSpeed instanceof Function},t.exports=n},{"../audio-context":1}]},{},[2])(2)});