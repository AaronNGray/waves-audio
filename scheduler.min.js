!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.scheduler=e()}}(function(){return function e(t,n,i){function r(s,u){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){var n=t[s][1][e];return r(n?n:e)},h,h.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t){var n=window.audioContext||new AudioContext||new webkitAudioContext;window.audioContext=n,t.exports=n},{}],2:[function(e,t){"use strict";var n=function(){function e(){this.__objects=[],this.reverse=!1}function t(){return this.__objects[0][0]}var n=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),i=Object.getOwnPropertyDescriptor,r=function(e,t){for(var r in t)t.hasOwnProperty(r)&&n(e,r,i(t,r));return e},o=Object.defineProperties,s={};return o(e.prototype,{head:{get:t,configurable:!0,enumerable:!0}}),n(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.__objectIndex=function(e){for(var t=0;t<this.__objects.length;t++)if(e===this.__objects[t][0])return t;return-1},s.__removeObject=function(e){var t=this.__objectIndex(e);return t>=0&&this.__objects.splice(t,1),this.__objects.length>0?this.__objects[0][1]:1/0},s.__sortObjects=function(){this.reverse?this.__objects.sort(function(e,t){return t[1]-e[1]}):this.__objects.sort(function(e,t){return e[1]-t[1]})},s.insert=function(e,t){var n=arguments[2];return void 0===n&&(n=!0),1/0!==t&&t!=-1/0?(this.__objects.push([e,t]),n&&this.__sortObjects(),this.__objects[0][1]):this.__removeObject(e)},s.move=function(e,t){if(1/0!==t&&t!=-1/0){var n=this.__objectIndex(e);return 0>n?this.__objects.push([e,t]):this.__objects[n][1]=t,this.__sortObjects(),this.__objects[0][1]}return this.__removeObject(e)},s.remove=function(e){return this.__removeObject(e)},s.clear=function(){return this.__objects.length=0,1/0},r(e.prototype,s),s=void 0,e}();t.exports=n},{}],3:[function(e,t){"use strict";function n(e,t){var n=e.indexOf(t);return n>=0?(e.splice(n,1),!0):!1}var i=e("../audio-context"),r=e("../priority-queue"),o=(e("../time-engine"),function(){function e(){this.__queue=new r,this.__scheduledEngines=[],this.__currentTime=null,this.__nextTime=1/0,this.__timeout=null,this.period=.025,this.lookahead=.1}function t(){return this.__currentTime||i.currentTime+this.lookahead}var o=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),s=Object.getOwnPropertyDescriptor,u=function(e,t){for(var n in t)t.hasOwnProperty(n)&&o(e,n,s(t,n));return e},c=Object.defineProperties,h={};return c(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),h.__tick=function(){for(var e=this;this.__nextTime<=i.currentTime+this.lookahead;){this.__currentTime=this.__nextTime;var t=this.__queue.head,n=Math.max(t.advanceTime(this.__currentTime),this.__currentTime);this.__nextTime=this.__queue.move(t,n)}this.__currentTime=null,this.__timeout=null,1/0!==this.__nextTime&&(this.__timeout=setTimeout(function(){e.__tick()},1e3*this.period))},h.__reschedule=function(){1/0!==this.__nextTime?this.__timeout||this.__tick():this.__timeout&&(clearTimeout(this.__timeout),this.__timeout=null)},h.callback=function(e){var t=arguments[1];void 0===t&&(t=0);var n=arguments[2];void 0===n&&(n=0);var i={period:t||1/0,executeNext:function(t,n){return e(t,n),t+this.period}};return this.__nextTime=this.__queue.insert(i,this.currentTime+n),this.__reschedule(),i},h.add=function(e){var t=arguments[1];void 0===t&&(t=0);var n=arguments[2];void 0===n&&(n=null);var i=this;if(e.master)throw new Error("object has already been added to a master");if(!e.implementsScheduled)throw new Error("object cannot be added to scheduler");this.__scheduledEngines.push(e),e.setScheduled(this,function(t){i.__nextTime=i.__queue.move(e,t),i.__reschedule()},function(){return i.currentTime},n),this.__nextTime=this.__queue.insert(e,this.currentTime+t),this.__reschedule()},h.remove=function(e){if(!n(this.__scheduledEngines,e))throw new Error("object has not been added to this scheduler");e.resetScheduled(),this.__nextTime=this.__queue.remove(e),this.__reschedule()},h.reset=function(e,t){if(e.master!==this)throw new Error("object has not been added to this scheduler");this.__nextTime=this.__queue.move(e,t),this.__reschedule()},u(e.prototype,h),h=void 0,e}());t.exports=new o},{"../audio-context":1,"../priority-queue":2,"../time-engine":4}],4:[function(e,t){"use strict";var n=e("../audio-context"),i=function(){function e(){this.master=null,this.interface=null,this.transportStartPosition=0,this.outputNode=null}function t(){return this.advanceTime&&this.advanceTime instanceof Function}function i(){return this.syncPosition&&this.syncPosition instanceof Function&&this.advancePosition&&this.advancePosition instanceof Function}function r(){return this.syncSpeed&&this.syncSpeed instanceof Function}function o(){return n.currentTime}function s(){return 0}var u=Object.defineProperty,c=function(e,t){for(var n in t)t.hasOwnProperty(n)&&u(e,n,Object.getOwnPropertyDescriptor(t,n));return e},h={};return Object.defineProperties(e.prototype,{implementsScheduled:{get:t,configurable:!0,enumerable:!0},implementsTransported:{get:i,configurable:!0,enumerable:!0},implementsSpeedControlled:{get:r,configurable:!0,enumerable:!0},currentTime:{get:o,configurable:!0,enumerable:!0},currentPosition:{get:s,configurable:!0,enumerable:!0}}),u(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),h.resetEngineTime=function(){},h.resyncEnginePosition=function(){},h.__setGetters=function(e,t){e&&Object.defineProperty(this,"currentTime",{configurable:!0,get:e,set:function(){}}),t&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:t,set:function(){}})},h.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},h.setScheduled=function(e,t,n,i){this.master=e,this.interface="scheduled",this.__setGetters(n,i),t&&(this.resetEngineTime=t)},h.resetScheduled=function(){this.__deleteGetters(),delete this.resetEngineTime,this.master=null,this.interface=null},h.setTransported=function(e,t,n,i,r){this.master=e,this.interface="transported",this.transportStartPosition=t,this.__setGetters(i,r),n&&(this.resyncEnginePosition=n)},h.resetTransported=function(){this.__deleteGetters(),delete this.resyncEnginePosition,this.transportStartPosition=0,this.master=null,this.interface=null},h.setSpeedControlled=function(e,t,n){this.master=e,this.interface="speed-controlled",this.__setGetters(t,n)},h.resetSpeedControlled=function(){this.__deleteGetters(),this.master=null,this.interface=null},h.removeFromMaster=function(){this.master&&this.master.remove(this)},h.connect=function(e){return this.outputNode.connect(e),this},h.disconnect=function(e){return this.outputNode.disconnect(e),this},c(e.prototype,h),h=void 0,e}();t.exports=i},{"../audio-context":1}]},{},[3])(3)});