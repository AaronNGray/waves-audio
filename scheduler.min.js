!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.scheduler=e()}}(function(){return function e(t,n,i){function r(o,_){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!_&&u)return u(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return r(n?n:e)},h,h.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t){"use strict";var n=e("audio-context"),i=e("event-queue"),r=function(){function e(){return this.__eventQueue=new i,this.__eventTime=null,this.__nextTime=1/0,this.__timeout=null,this.schedulingPeriod=.025,this.scheduleAheadTime=.1,this}function t(){return this.__eventTime||n.currentTime+this.scheduleAheadTime}var r=Object.defineProperty;return Object.defineProperties(e.prototype,{time:{get:t,configurable:!0,enumerable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e.prototype.__tick=function(){var e=this;for(this.__looping=!0;this.__nextTime<=n.currentTime+this.scheduleAheadTime;)this.__eventTime=this.__nextTime,this.__nextTime=this.__eventQueue.advance(this.__nextTime,this.__nextTime);this.__eventTime=null,this.__timeout=setTimeout(function(){e.__tick()},1e3*this.schedulingPeriod)},e.prototype.__reschedule=function(){1/0!==this.__nextTime?this.__timeout||this.__tick():this.__timeout&&(clearTimeout(this.__timeout),this.__timeout=null)},e.prototype.callback=function(e){var t=arguments[1];void 0===t&&(t=0);var n={executeEvent:function(t,n){return e(t,n),1/0}};return this.__nextTime=this.__eventQueue.insert(n,this.time+t,!1),this.__reschedule(),n},e.prototype.add=function(e){var t=arguments[1];void 0===t&&(t=0),null===e.scheduler&&(this.__nextTime=this.__eventQueue.insert(e,this.time+t),e.scheduler=this,this.__reschedule())},e.prototype.remove=function(e){e.scheduler===this&&(this.__nextTime=this.__eventQueue.remove(e),e.scheduler=null,this.__reschedule())},e.prototype.resync=function(e){e.scheduler===this&&(this.__nextTime=this.__eventQueue.move(e,this.time),this.__reschedule())},e.prototype.reschedule=function(e,t){e.scheduler===this&&(this.__nextTime=this.__eventQueue.move(e,t,!1),this.__reschedule())},e}();t.exports=new r},{"audio-context":2,"event-queue":3}],2:[function(e,t){var n=window.audioContext||new AudioContext;window.audioContext=n,t.exports=n},{}],3:[function(e,t){"use strict";var n=function(){function e(){this.__events=[],this.reverse=!1}var t=Object.defineProperty;return t(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e.prototype.__eventIndex=function(e){for(var t=0;t<this.__events.length;t++)if(e===this.__events[t][0])return t;return-1},e.prototype.__removeEvent=function(e){var t=this.__eventIndex(e);return t>=0&&this.__events.splice(t,1),this.__events.length>0?this.__events[0][1]:1/0},e.prototype.__syncEvent=function(e,t){var n=Math.max(e.syncEvent(t),0),i=1/0;return 1/0!==n&&(i=this.reverse?t-n:t+n),i},e.prototype.__sortEvents=function(){this.reverse?this.__events.sort(function(e,t){return t[1]-e[1]}):this.__events.sort(function(e,t){return e[1]-t[1]})},e.prototype.insert=function(e,t){var n=arguments[2];void 0===n&&(n=!0);var i=t;return n&&(i=this.__syncEvent(e,t)),1/0!==i?(this.__events.push([e,i]),this.__sortEvents(),this.__events[0][1]):this.__removeEvent(e)},e.prototype.insertAll=function(e,t){var n=arguments[2];void 0===n&&(n=!0);for(var i=t,r=0;r<e.length;r++){var s=e[r];n&&(i=this.__syncEvent(s,t)),1/0!==i&&this.__events.push([s,i])}return this.__sortEvents(),this.__events.length>0?this.__events[0][1]:1/0},e.prototype.move=function(e,t){var n=arguments[2];void 0===n&&(n=!0);var i=t;if(n&&(i=this.__syncEvent(e,t)),1/0!==i){var r=this.__eventIndex(e);if(0>r)this.__events.push([e,i]),this.__sortEvents();else if(this.__events[r][1]=i,0===r&&this.__events.length>1){var s=this.__events[1][1];(!this.reverse&&i>s||this.reverse&&s>=i)&&this.__sortEvents()}return this.__events[0][1]}return this.__removeEvent(e)},e.prototype.remove=function(e){return this.__removeEvent(e)},e.prototype.clear=function(){return this.__events.length=0,1/0},e.prototype.advance=function(e,t){var n=this.__events[0][0],i=Math.max(n.executeEvent(e,t),0);if(1/0!==i){var r;if(r=this.reverse?e-i:e+i,this.__events[0][1]=r,this.__events.length>1){var s=this.__events[1][1];(!this.reverse&&r>s||this.reverse&&s>=r)&&this.__sortEvents()}return this.__events[0][1]}return this.__removeEvent(n)},e}();t.exports=n},{}]},{},[1])(1)});