!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.scheduler=e()}}(function(){return function e(t,n,r){function i(u,s){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}var _=n[u]={exports:{}};t[u][0].call(_.exports,function(e){var n=t[u][1][e];return i(n?n:e)},_,_.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t){var n=window.audioContext||new AudioContext||new webkitAudioContext;window.audioContext=n,t.exports=n},{}],2:[function(e,t){"use strict";var n=function(){function e(){this.__objects=[],this.reverse=!1}function t(){return this.__objects[0][0]}var n=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),r=Object.getOwnPropertyDescriptor,i=function(e,t){for(var i in t)t.hasOwnProperty(i)&&n(e,i,r(t,i));return e},o=Object.defineProperties,u={};return o(e.prototype,{head:{get:t,configurable:!0,enumerable:!0}}),n(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.__objectIndex=function(e){for(var t=0;t<this.__objects.length;t++)if(e===this.__objects[t][0])return t;return-1},u.__removeObject=function(e){var t=this.__objectIndex(e);return t>=0&&this.__objects.splice(t,1),this.__objects.length>0?this.__objects[0][1]:1/0},u.__sortObjects=function(){this.reverse?this.__objects.sort(function(e,t){return t[1]-e[1]}):this.__objects.sort(function(e,t){return e[1]-t[1]})},u.insert=function(e,t){var n=arguments[2];return void 0===n&&(n=!0),1/0!==t&&t!=-1/0?(this.__objects.push([e,t]),n&&this.__sortObjects(),this.__objects[0][1]):this.__removeObject(e)},u.move=function(e,t){if(1/0!==t&&t!=-1/0){var n=this.__objectIndex(e);return 0>n?this.__objects.push([e,t]):this.__objects[n][1]=t,this.__sortObjects(),this.__objects[0][1]}return this.__removeObject(e)},u.remove=function(e){return this.__removeObject(e)},u.clear=function(){return this.__objects.length=0,1/0},i(e.prototype,u),u=void 0,e}();t.exports=n},{}],3:[function(e,t){t.exports=e(1)},{}],4:[function(e,t){"use strict";var n=e("audio-context"),r=function(){function e(){this.interface=null,this.outputNode=null}function t(){return n.currentTime}function r(){return 0}var i=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),o=Object.getOwnPropertyDescriptor,u=function(e,t){for(var n in t)t.hasOwnProperty(n)&&i(e,n,o(t,n));return e},s=Object.defineProperties,c={};return s(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0},currentPosition:{get:r,configurable:!0,enumerable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),c.resetNextTime=function(){var e=arguments[0];void 0===e&&(e=null)},c.resetNextPosition=function(){var e=arguments[0];void 0===e&&(e=null)},c.__setGetters=function(e,t){e&&Object.defineProperty(this,"currentTime",{configurable:!0,get:e,set:function(){}}),t&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:t,set:function(){}})},c.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},c.connect=function(e){return this.outputNode.connect(e),this},c.disconnect=function(e){return this.outputNode.disconnect(e),this},u(e.prototype,c),c=void 0,e}();r.implementsScheduled=function(e){return e.advanceTime&&e.advanceTime instanceof Function},r.implementsTransported=function(e){return e.syncPosition&&e.syncPosition instanceof Function&&e.advancePosition&&e.advancePosition instanceof Function},r.implementsSpeedControlled=function(e){return e.syncSpeed&&e.syncSpeed instanceof Function},r.setScheduled=function(e,t,n,r){e.interface="scheduled",e.__setGetters(n,r),t&&(e.resetNextTime=t)},r.setTransported=function(e,t,n,r){e.interface="transported",e.__setGetters(n,r),t&&(e.resetNextPosition=t)},r.setSpeedControlled=function(e,t,n){e.interface="speed-controlled",e.__setGetters(t,n)},r.resetInterface=function(e){e.__deleteGetters(),delete e.resetNextTime,delete e.resetNextPosition,e.interface=null},t.exports=r},{"audio-context":3}],5:[function(e,t){"use strict";function n(e,t){var n=e.indexOf(t);return n>=0?(e.splice(n,1),!0):!1}var r=e("audio-context"),i=e("priority-queue"),o=e("time-engine"),u=function(){function e(){this.__queue=new i,this.__engines=[],this.__currentTime=null,this.__nextTime=1/0,this.__timeout=null,this.period=.025,this.lookahead=.1}function t(){return this.__currentTime||r.currentTime+this.lookahead}var u=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),s=Object.getOwnPropertyDescriptor,c=function(e,t){for(var n in t)t.hasOwnProperty(n)&&u(e,n,s(t,n));return e},_=Object.defineProperties,a={};return _(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0}}),u(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a.__tick=function(){for(var e=this.__nextTime;e<=r.currentTime+this.lookahead;){this.__currentTime=e;var t=this.__queue.head,n=Math.max(t.advanceTime(this.__currentTime),this.__currentTime);e=this.__queue.move(t,n)}this.__currentTime=null,this.__timeout=null,this.__reschedule(e)},a.__reschedule=function(e){var t=this;if(this.__timeout&&(clearTimeout(this.__timeout),this.__timeout=null),1/0!==e){this.__nextTime=e;var n=Math.max(e-r.currentTime-this.lookahead,this.period);this.__timeout=setTimeout(function(){t.__tick()},1e3*n)}},a.callback=function(e){var t=arguments[1];void 0===t&&(t=0);var n=arguments[2];void 0===n&&(n=0);var r={period:n||1/0,advanceTime:function(t){return e(t),t+this.period}},i=this.__queue.insert(r,this.currentTime+t);return this.__reschedule(i),r},a.add=function(e){var t=arguments[1];void 0===t&&(t=0);var n=arguments[2];void 0===n&&(n=null);var r=this;if(e.interface)throw new Error("object has already been added to a master");if(!o.implementsScheduled(e))throw new Error("object cannot be added to scheduler");this.__engines.push(e),o.setScheduled(e,function(t){var n=r.__queue.move(e,t);r.__reschedule(n)},function(){return r.currentTime},n);var i=this.__queue.insert(e,this.currentTime+t);return this.__reschedule(i),e},a.remove=function(e){if(!n(this.__engines,e))throw new Error("object has not been added to this scheduler");o.resetInterface(e);var t=this.__queue.remove(e);this.__reschedule(t)},a.reset=function(e,t){var n=this.__queue.move(e,t);this.__reschedule(n)},c(e.prototype,a),a=void 0,e}();t.exports=new u},{"audio-context":1,"priority-queue":2,"time-engine":4}]},{},[5])(5)});