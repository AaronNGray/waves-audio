!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.scheduler=e()}}(function(){return function e(t,r,n){function o(u,c){if(!r[u]){if(!t[u]){var s="function"==typeof require&&require;if(!c&&s)return s(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var a=r[u]={exports:{}};t[u][0].call(a.exports,function(e){var r=t[u][1][e];return o(r?r:e)},a,a.exports,e,t,r,n)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(){!function(){"use strict";function e(e){e&&(e.setTargetAtTime||(e.setTargetAtTime=e.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var t=this.internal_createGain();return e(t.gain),t},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(t){var r=t?this.internal_createDelay(t):this.internal_createDelay();return e(r.delayTime),r},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();return t.start||(t.start=function(e,t,r){t||r?this.noteGrainOn(e,t,r):this.noteOn(e)}),t.stop||(t.stop=t.noteOff),e(t.playbackRate),t},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();return e(t.threshold),e(t.knee),e(t.ratio),e(t.reduction),e(t.attack),e(t.release),t},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();return e(t.frequency),e(t.detune),e(t.Q),e(t.gain),t},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();return t.start||(t.start=t.noteOn),t.stop||(t.stop=t.noteOff),t.setPeriodicWave||(t.setPeriodicWave=t.setWaveTable),e(t.frequency),e(t.detune),t}))}(window)},{}],2:[function(e,t){e("./ac-monkeypatch"),t.exports=new AudioContext},{"./ac-monkeypatch":1}],3:[function(e,t){"use strict";var r=function(){function e(){this.__objects=[],this.reverse=!1}function t(){return this.__objects[0][0]}var r=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),n=Object.getOwnPropertyDescriptor,o=function(e,t){for(var o in t)t.hasOwnProperty(o)&&r(e,o,n(t,o));return e},i=Object.defineProperties,u={};return i(e.prototype,{head:{get:t,configurable:!0,enumerable:!0}}),r(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.__objectIndex=function(e){for(var t=0;t<this.__objects.length;t++)if(e===this.__objects[t][0])return t;return-1},u.__removeObject=function(e){var t=this.__objectIndex(e);return t>=0&&this.__objects.splice(t,1),this.__objects.length>0?this.__objects[0][1]:1/0},u.__sortObjects=function(){this.reverse?this.__objects.sort(function(e,t){return t[1]-e[1]}):this.__objects.sort(function(e,t){return e[1]-t[1]})},u.insert=function(e,t){var r=arguments[2];return void 0===r&&(r=!0),1/0!==t&&t!=-1/0?(this.__objects.push([e,t]),r&&this.__sortObjects(),this.__objects[0][1]):this.__removeObject(e)},u.move=function(e,t){if(1/0!==t&&t!=-1/0){var r=this.__objectIndex(e);return 0>r?this.__objects.push([e,t]):this.__objects[r][1]=t,this.__sortObjects(),this.__objects[0][1]}return this.__removeObject(e)},u.remove=function(e){return this.__removeObject(e)},u.clear=function(){return this.__objects.length=0,1/0},o(e.prototype,u),u=void 0,e}();t.exports=r},{}],4:[function(e,t){t.exports=e(1)},{}],5:[function(e,t){t.exports=e(2)},{"./ac-monkeypatch":4}],6:[function(e,t){"use strict";var r=e("audio-context"),n=function(){function e(){this.interface=null,this.outputNode=null}function t(){return r.currentTime}function n(){return 0}var o=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),i=Object.getOwnPropertyDescriptor,u=function(e,t){for(var r in t)t.hasOwnProperty(r)&&o(e,r,i(t,r));return e},c=Object.defineProperties,s={};return c(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0},currentPosition:{get:n,configurable:!0,enumerable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),s.resetNextTime=function(){var e=arguments[0];void 0===e&&(e=null)},s.resetNextPosition=function(){var e=arguments[0];void 0===e&&(e=null)},s.__setGetters=function(e,t){e&&Object.defineProperty(this,"currentTime",{configurable:!0,get:e,set:function(){}}),t&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:t,set:function(){}})},s.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},s.connect=function(e){return this.outputNode.connect(e),this},s.disconnect=function(e){return this.outputNode.disconnect(e),this},u(e.prototype,s),s=void 0,e}();n.implementsScheduled=function(e){return e.advanceTime&&e.advanceTime instanceof Function},n.implementsTransported=function(e){return e.syncPosition&&e.syncPosition instanceof Function&&e.advancePosition&&e.advancePosition instanceof Function},n.implementsSpeedControlled=function(e){return e.syncSpeed&&e.syncSpeed instanceof Function},n.setScheduled=function(e,t,r,n){e.interface="scheduled",e.__setGetters(r,n),t&&(e.resetNextTime=t)},n.setTransported=function(e,t,r,n){e.interface="transported",e.__setGetters(r,n),t&&(e.resetNextPosition=t)},n.setSpeedControlled=function(e,t,r){e.interface="speed-controlled",e.__setGetters(t,r)},n.resetInterface=function(e){e.__deleteGetters(),delete e.resetNextTime,delete e.resetNextPosition,e.interface=null},t.exports=n},{"audio-context":5}],7:[function(e,t){"use strict";function r(e,t){var r=e.indexOf(t);return r>=0?(e.splice(r,1),!0):!1}var n=e("audio-context"),o=e("priority-queue"),i=e("time-engine"),u=function(){function e(){this.__queue=new o,this.__engines=[],this.__currentTime=null,this.__nextTime=1/0,this.__timeout=null,this.period=.025,this.lookahead=.1}function t(){return this.__currentTime||n.currentTime+this.lookahead}var u=(function(e,t){return e.__proto__={a:t},e.a===t}({},{}),Object.defineProperty),c=Object.getOwnPropertyDescriptor,s=function(e,t){for(var r in t)t.hasOwnProperty(r)&&u(e,r,c(t,r));return e},a=Object.defineProperties,d={};return a(e.prototype,{currentTime:{get:t,configurable:!0,enumerable:!0}}),u(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),d.__tick=function(){var e=this.__nextTime;for(this.__timeout=null;e<=n.currentTime+this.lookahead;){this.__currentTime=e;var t=this.__queue.head,r=Math.max(t.advanceTime(this.__currentTime),this.__currentTime);e=this.__queue.move(t,r)}this.__currentTime=null,this.__reschedule(e)},d.__reschedule=function(e){var t=this;if(this.__timeout&&(clearTimeout(this.__timeout),this.__timeout=null),1/0!==e){this.__nextTime=e;var r=Math.max(e-n.currentTime-this.lookahead,this.period);this.__timeout=setTimeout(function(){t.__tick()},1e3*r)}},d.callback=function(e){var t=arguments[1];void 0===t&&(t=0);var r=arguments[2];void 0===r&&(r=0);var n={period:r||1/0,advanceTime:function(t){return e(t),t+this.period}},o=this.__queue.insert(n,this.currentTime+t);return this.__reschedule(o),n},d.add=function(e){var t=arguments[1];void 0===t&&(t=0);var r=arguments[2];void 0===r&&(r=null);var n=this;if(e.interface)throw new Error("object has already been added to a master");if(!i.implementsScheduled(e))throw new Error("object cannot be added to scheduler");this.__engines.push(e),i.setScheduled(e,function(t){var r=n.__queue.move(e,t);n.__reschedule(r)},function(){return n.currentTime},r);var o=this.__queue.insert(e,this.currentTime+t);return this.__reschedule(o),e},d.remove=function(e){if(!r(this.__engines,e))throw new Error("object has not been added to this scheduler");i.resetInterface(e);var t=this.__queue.remove(e);this.__reschedule(t)},d.reset=function(e,t){var r=this.__queue.move(e,t);this.__reschedule(r)},s(e.prototype,d),d=void 0,e}();t.exports=new u},{"audio-context":2,"priority-queue":3,"time-engine":6}]},{},[7])(7)});