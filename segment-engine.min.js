!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.SegmentEngine=t()}}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return r(i?i:t)},c,c.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e){"use strict";var i=t("audio-context"),n=t("time-engine"),r=function(t){function e(){var e=arguments[0];void 0===e&&(e=null),t.call(this,!1),this.buffer=e,this.periodAbs=.1,this.periodRel=0,this.periodVar=0,this.positionArray=[0],this.positionVar=0,this.durationArray=[0],this.durationAbs=0,this.durationRel=1,this.offsetArray=[0],this.offsetAbs=-.005,this.offsetRel=0,this.delay=.005,this.attackAbs=.005,this.attackRel=0,this.releaseAbs=.005,this.releaseRel=0,this.resampling=0,this.resamplingVar=0,this.segmentIndex=0,this.cyclic=!1,this.outputNode=this.__gainNode=i.createGain()}function n(t){this.__gainNode.gain.value=t}function r(){return this.__gainNode.gain.value}var o=Object.defineProperty,s=function(t,e){for(var i in e)e.hasOwnProperty(i)&&o(t,i,Object.getOwnPropertyDescriptor(e,i));return t};s(e,t);var a={};return e.prototype=Object.create(t.prototype,{constructor:{value:e,configurable:!0,writable:!0},gain:{get:r,set:n,configurable:!0,enumerable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a.syncPosition=function(){return 1/0},a.advancePosition=function(){return 1/0},a.advanceTime=function(t){return t+this.trigger(t)},a.trigger=function(t){var e=t||i.currentTime+this.delay,n=this.periodAbs,r=this.segmentIndex;if(this.buffer){var o=0,s=0,a=0,u=1,c=this.buffer.duration;if(this.buffer.wrapAroundExtension&&(c-=this.buffer.wrapAroundExtension),this.cyclic?r%=this.positionArray.length:r=Math.max(0,Math.min(r,this.positionArray.length-1)),this.positionArray&&(o=this.positionArray[r]||0),this.durationArray&&(s=this.durationArray[r]||0),this.offsetArray&&(a=this.offsetArray[r]||0),0!==this.resampling||this.resamplingVar>0){var f=2*(Math.random()-.5)*this.resamplingVar;u=Math.pow(2,(this.resampling+f)/1200)}if(0===s||this.periodRel>0){var h,l,d=r+1;d===this.positionArray.length?this.cyclic?(h=this.positionArray[0]+c,l=this.offsetArray[0]):(h=c,l=0):(h=this.positionArray[d],l=this.offsetArray[d]);var p=h-o;a>0&&(p-=a),l>0&&(p+=l),0>p&&(p=0),0===s&&(s=p),n+=this.periodRel*p}if(s*=this.durationRel,s+=this.durationAbs,a*=this.offsetRel,a+=this.offsetAbs,0>a?(s-=a,o+=a,e+=a/u):e-=a/u,this.positionVar>0&&(o+=2*(Math.random()-.5)*this.positionVar),0>o&&(s+=o,o=0),o+s>this.buffer.duration&&(s=this.buffer.duration-o),this.gain>0&&s>0){var g=i.createGain(),m=this.attackAbs+this.attackRel*s,y=this.releaseAbs+this.releaseRel*s;if(m+y>s){var b=s/(m+y);m*=b,y*=b}var v=e+m,A=e+s,x=A-y;g.gain.value=this.gain,g.gain.setValueAtTime(0,e),g.gain.linearRampToValueAtTime(this.gain,v),x>v&&g.gain.setValueAtTime(this.gain,x),g.gain.linearRampToValueAtTime(0,A),g.connect(this.__gainNode);var _=i.createBufferSource();_.buffer=this.buffer,_.playbackRate.value=u,_.connect(g),g.connect(this.__gainNode),_.start(e,o),_.stop(e+s/u)}}return n},s(e.prototype,a),a=void 0,e}(n);e.exports=r},{"audio-context":2,"time-engine":3}],2:[function(t,e){var i=window.audioContext||new AudioContext||new webkitAudioContext;window.audioContext=i,e.exports=i},{}],3:[function(t,e){"use strict";var i=t("audio-context"),n=function(){function t(){this.interface=null,this.transportStartPosition=0,this.outputNode=null}function e(){return i.currentTime}function n(){return 0}var r=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),o=Object.getOwnPropertyDescriptor,s=function(t,e){for(var i in e)e.hasOwnProperty(i)&&r(t,i,o(e,i));return t},a=Object.defineProperties,u={};return a(t.prototype,{currentTime:{get:e,configurable:!0,enumerable:!0},currentPosition:{get:n,configurable:!0,enumerable:!0}}),r(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.resetNextTime=function(){var t=arguments[0];void 0===t&&(t=null)},u.resetNextPosition=function(){var t=arguments[0];void 0===t&&(t=null)},u.__setGetters=function(t,e){t&&Object.defineProperty(this,"currentTime",{configurable:!0,get:t,set:function(){}}),e&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:e,set:function(){}})},u.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},u.setScheduled=function(t,e,i){this.interface="scheduled",this.__setGetters(e,i),t&&(this.resetNextTime=t)},u.setTransported=function(t,e,i,n){this.interface="transported",this.transportStartPosition=t,this.__setGetters(i,n),e&&(this.resetNextPosition=e)},u.setSpeedControlled=function(t,e){this.interface="speed-controlled",this.__setGetters(t,e)},u.resetInterface=function(){this.__deleteGetters(),delete this.resetNextTime,delete this.resetNextPosition,this.transportStartPosition=0,this.interface=null},u.connect=function(t){return this.outputNode.connect(t),this},u.disconnect=function(t){return this.outputNode.disconnect(t),this},s(t.prototype,u),u=void 0,t}();n.implementsScheduled=function(t){return t.advanceTime&&t.advanceTime instanceof Function},n.implementsTransported=function(t){return t.syncPosition&&t.syncPosition instanceof Function&&t.advancePosition&&t.advancePosition instanceof Function},n.implementsSpeedControlled=function(t){return t.syncSpeed&&t.syncSpeed instanceof Function},e.exports=n},{"audio-context":4}],4:[function(t,e){e.exports=t(2)},{}]},{},[1])(1)});