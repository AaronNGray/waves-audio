!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.SegmentEngine=t()}}(function(){return function t(i,e,n){function r(s,a){if(!e[s]){if(!i[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var f=e[s]={exports:{}};i[s][0].call(f.exports,function(t){var e=i[s][1][t];return r(e?e:t)},f,f.exports,t,i,e,n)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,i){"use strict";var e=t("audio-context"),n=t("time-engine"),r=function(t){function i(){var i=arguments[0];void 0===i&&(i=null),t.call(this,!1),this.buffer=i,this.periodAbs=.1,this.periodRel=0,this.periodVar=0,this.positionArray=[0],this.positionVar=0,this.durationArray=[0],this.durationAbs=0,this.durationRel=1,this.offsetArray=[0],this.offsetAbs=-.005,this.offsetRel=0,this.delay=.005,this.attackAbs=.005,this.attackRel=0,this.releaseAbs=.005,this.releaseRel=0,this.resampling=0,this.resamplingVar=0,this.segmentIndex=0,this.cyclic=!1,this.outputNode=this.__gainNode=e.createGain()}function n(t){this.__gainNode.gain.value=t}function r(){return this.__gainNode.gain.value}var o=Object.defineProperty,s=function(t,i){for(var e in i)i.hasOwnProperty(e)&&o(t,e,Object.getOwnPropertyDescriptor(i,e));return t};s(i,t);var a={};return i.prototype=Object.create(t.prototype,{constructor:{value:i,configurable:!0,writable:!0},gain:{get:r,set:n,configurable:!0,enumerable:!0}}),o(i,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a.syncPosition=function(){return 1/0},a.advancePosition=function(){return 1/0},a.advanceTime=function(t){return t+this.trigger(t)},a.trigger=function(t){var i=t||e.currentTime+this.delay,n=this.periodAbs,r=this.segmentIndex;if(this.buffer){var o=0,s=0,a=0,u=1,f=this.buffer.duration;if(this.buffer.wrapAroundExtension&&(f-=this.buffer.wrapAroundExtension),this.cyclic?r%=this.positionArray.length:r=Math.max(0,Math.min(r,this.positionArray.length-1)),this.positionArray&&(o=this.positionArray[r]||0),this.durationArray&&(s=this.durationArray[r]||0),this.offsetArray&&(a=this.offsetArray[r]||0),0!==this.resampling||this.resamplingVar>0){var h=2*(Math.random()-.5)*this.resamplingVar;u=Math.pow(2,(this.resampling+h)/1200)}if(0===s||this.periodRel>0){var c,l,p=r+1;p===this.positionArray.length?this.cyclic?(c=this.positionArray[0]+f,l=this.offsetArray[0]):(c=f,l=0):(c=this.positionArray[p],l=this.offsetArray[p]);var d=c-o;a>0&&(d-=a),l>0&&(d+=l),0>d&&(d=0),0===s&&(s=d),n+=this.periodRel*d}if(s*=this.durationRel,s+=this.durationAbs,a*=this.offsetRel,a+=this.offsetAbs,0>a?(s-=a,o+=a,i+=a/u):i-=a/u,this.positionVar>0&&(o+=2*(Math.random()-.5)*this.positionVar),0>o&&(s+=o,o=0),o+s>this.buffer.duration&&(s=this.buffer.duration-o),this.gain>0&&s>0){var g=e.createGain(),y=this.attackAbs+this.attackRel*s,b=this.releaseAbs+this.releaseRel*s;if(y+b>s){var v=s/(y+b);y*=v,b*=v}var m=i+y,A=i+s,w=A-b;g.gain.value=this.gain,g.gain.setValueAtTime(0,i),g.gain.linearRampToValueAtTime(this.gain,m),w>m&&g.gain.setValueAtTime(this.gain,w),g.gain.linearRampToValueAtTime(0,A),g.connect(this.__gainNode);var x=e.createBufferSource();x.buffer=this.buffer,x.playbackRate.value=u,x.connect(g),g.connect(this.__gainNode),x.start(i,o),x.stop(i+s/u)}}return n},s(i.prototype,a),a=void 0,i}(n);i.exports=r},{"audio-context":2,"time-engine":3}],2:[function(t,i){var e=window.audioContext||new AudioContext||new webkitAudioContext;window.audioContext=e,i.exports=e},{}],3:[function(t,i){"use strict";var e=function(){function t(){this.timeMaster=null,this.positionMaster=null,this.outputNode=null}var i=Object.defineProperty,e=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,Object.getOwnPropertyDescriptor(e,n));return t},n={};return i(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.advanceTime=function(){return 1/0},n.resetEngineTime=function(t){this.timeMaster&&this.timeMaster.reset(this,t)},n.syncPosition=function(){var t=arguments[2];return void 0===t&&(t=!1),1/0},n.advancePosition=function(){var t=arguments[2];return void 0===t&&(t=!1),1/0},n.resyncEnginePosition=function(){this.positionMaster&&this.positionMaster.resync(this)},n.connect=function(t){return this.outputNode.connect(t),this},n.disconnect=function(t){return this.outputNode.disconnect(t),this},e(t.prototype,n),n=void 0,t}();i.exports=e},{}]},{},[1])(1)});