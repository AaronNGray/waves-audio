!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.SegmentEngine=t()}}(function(){return function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return n(i?i:t)},h,h.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e){"use strict";var i=t("audio-context"),r=t("event-engine"),n=function(t){function e(){var e=arguments[0];void 0===e&&(e=null),t.call(this,!1),this.buffer=e,this.periodAbs=.1,this.periodRel=0,this.periodVar=0,this.positionArray=[0],this.positionVar=0,this.durationArray=[0],this.durationAbs=0,this.durationRel=1,this.offsetArray=[0],this.offsetAbs=.005,this.offsetRel=0,this.attackAbs=.005,this.attackRel=0,this.releaseAbs=.005,this.releaseRel=0,this.resampling=0,this.resamplingVar=0,this.markerIndex=0,this.cyclic=!1,this.__gainNode=i.createGain(),this.outputNode=this.__gainNode}function r(t){this.__gainNode.gain.value=t}function n(){return this.__gainNode.gain.value}var o=Object.defineProperty,s=function(t,e){for(var i in e)e.hasOwnProperty(i)&&o(t,i,Object.getOwnPropertyDescriptor(e,i));return t};return s(e,t),e.prototype=Object.create(t.prototype,{constructor:{value:e,configurable:!0,writable:!0},gain:{get:n,set:r,configurable:!0,enumerable:!0}}),o(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e.prototype.syncEvent=function(t){var e=0;if(this.__aligned||this.transport){var i=t/this.period;this.transport&&this.transport.reverse&&(i*=-1),e=(Math.ceil(i)-i)*this.period}return e},e.prototype.executeEvent=function(t,e){return this.trigger(e)},e.prototype.trigger=function(t){var e=t||i.currentTime,r=this.periodAbs,n=this.markerIndex;if(this.buffer){var o=0,s=0,a=0,u=1;if(this.cyclic?n%=this.positionArray.length:n=Math.max(0,Math.min(n,this.positionArray.length-1)),this.positionArray&&(o=this.positionArray[n]||0),this.durationArray&&(s=this.durationArray[n]||0),this.offsetArray&&(a=this.offsetArray[n]||0),0!==this.resampling||this.resamplingVar>0){var h=2*(Math.random()-.5)*this.resamplingVar;u=Math.pow(2,(this.resampling+h)/1200)}if(0===s||this.periodRel>0){var f=this.positionArray[n+1]||this.buffer.duration,c=this.offsetArray[n+1]||0,p=f-o;a>0&&(p-=a),c>0&&(p+=c),0>p&&(p=0),0===s&&(s=p),r+=this.periodRel*p}if(s*=this.durationRel,s+=this.durationAbs,a*=this.offsetRel,a+=this.offsetAbs,0>a?(s-=a,o+=a,e+=a/u):e-=a/u,this.positionVar>0&&(o+=2*(Math.random()-.5)*this.positionVar),0>o&&(s+=o,o=0),o+s>this.buffer.duration&&(s=this.buffer.duration-o),this.gain>0&&s>0){var l=i.createGain(),d=this.attackAbs+this.attackRel*s,g=this.releaseAbs+this.releaseRel*s;if(d+g>s){var y=s/(d+g);d*=y,g*=y}e<i.currentTime&&(e=i.currentTime);var v=e+d,b=e+s,m=b-g;l.gain.value=this.gain,l.gain.setValueAtTime(0,e),l.gain.linearRampToValueAtTime(this.gain,v),m>v&&l.gain.setValueAtTime(this.gain,m),l.gain.linearRampToValueAtTime(0,b),l.connect(this.__gainNode);var A=i.createBufferSource();A.buffer=this.buffer,A.playbackRate.value=u,A.connect(l),l.connect(this.__gainNode),A.start(e,o),A.stop(e+s/u)}}return r},e}(r);e.exports=n},{"audio-context":2,"event-engine":3}],2:[function(t,e){var i=window.audioContext||new AudioContext||new webkitAudioContext;window.audioContext=i,e.exports=i},{}],3:[function(t,e){"use strict";var i=function(){function t(){var t=arguments[0];void 0===t&&(t=!0),this.scheduler=null,this.transport=null,this.alignToTransportPosition=t,this.outputNode=null}var e=Object.defineProperty;return e(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),t.prototype.syncEvent=function(){return 0},t.prototype.executeEvent=function(){return 1/0},t.prototype.resyncEngine=function(){this.scheduler&&this.scheduler.resync(this)},t.prototype.rescheduleEngine=function(t){this.scheduler&&this.scheduler.reschedule(this,t)},t.prototype.connect=function(t){return this.outputNode.connect(t),this},t.prototype.disconnect=function(t){return this.outputNode.disconnect(t),this},t}();e.exports=i},{}]},{},[1])(1)});