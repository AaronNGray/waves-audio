!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Transport=t()}}(function(){return function t(e,n,o){function i(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n?n:t)},c,c.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e){"use strict";var n=function(){function t(){this.__objects=[],this.reverse=!1}function e(){return this.__objects[0][0]}function n(){return this.__objects[0][1]}var o=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),i=Object.getOwnPropertyDescriptor,r=function(t,e){for(var n in e)e.hasOwnProperty(n)&&o(t,n,i(e,n));return t},s=Object.defineProperties,u={};return s(t.prototype,{head:{get:e,configurable:!0,enumerable:!0},time:{get:n,configurable:!0,enumerable:!0}}),o(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),u.__objectIndex=function(t){for(var e=0;e<this.__objects.length;e++)if(t===this.__objects[e][0])return e;return-1},u.__removeObject=function(t){var e=this.__objectIndex(t);return e>=0&&this.__objects.splice(e,1),this.__objects.length>0?this.__objects[0][1]:1/0},u.__sortObjects=function(){this.reverse?this.__objects.sort(function(t,e){return e[1]-t[1]}):this.__objects.sort(function(t,e){return t[1]-e[1]})},u.insert=function(t,e){var n=arguments[2];return void 0===n&&(n=!0),1/0!==e&&e!=-1/0?(this.__objects.push([t,e]),n&&this.__sortObjects(),this.__objects[0][1]):this.__removeObject(t)},u.move=function(t,e){if(1/0!==e&&e!=-1/0){var n=this.__objectIndex(t);return 0>n?this.__objects.push([t,e]):this.__objects[n][1]=e,this.__sortObjects(),this.__objects[0][1]}return this.__removeObject(t)},u.remove=function(t){return this.__removeObject(t)},u.clear=function(){return this.__objects.length=0,1/0},r(t.prototype,u),u=void 0,t}();e.exports=n},{}],2:[function(){!function(){"use strict";function t(t){t&&(t.setTargetAtTime||(t.setTargetAtTime=t.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var e=this.internal_createGain();return t(e.gain),e},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(e){var n=e?this.internal_createDelay(e):this.internal_createDelay();return t(n.delayTime),n},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var e=this.internal_createBufferSource();return e.start||(e.start=function(t,e,n){e||n?this.noteGrainOn(t,e,n):this.noteOn(t)}),e.stop||(e.stop=e.noteOff),t(e.playbackRate),e},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var e=this.internal_createDynamicsCompressor();return t(e.threshold),t(e.knee),t(e.ratio),t(e.reduction),t(e.attack),t(e.release),e},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var e=this.internal_createBiquadFilter();return t(e.frequency),t(e.detune),t(e.Q),t(e.gain),e},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var e=this.internal_createOscillator();return e.start||(e.start=e.noteOn),e.stop||(e.stop=e.noteOff),e.setPeriodicWave||(e.setPeriodicWave=e.setWaveTable),t(e.frequency),t(e.detune),e}))}(window)},{}],3:[function(t,e){t("./ac-monkeypatch"),e.exports=new AudioContext},{"./ac-monkeypatch":2}],4:[function(t,e){e.exports=t(1)},{}],5:[function(t,e){e.exports=t(2)},{}],6:[function(t,e){e.exports=t(3)},{"./ac-monkeypatch":5}],7:[function(t,e){"use strict";var n=t("audio-context"),o=function(){function t(){this.interface=null,this.outputNode=null}function e(){return n.currentTime}function o(){return 0}var i=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),r=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},u=Object.defineProperties,a={};return u(t.prototype,{currentTime:{get:e,configurable:!0,enumerable:!0},currentPosition:{get:o,configurable:!0,enumerable:!0}}),i(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a.resetNextTime=function(){var t=arguments[0];void 0===t&&(t=null)},a.resetNextPosition=function(){var t=arguments[0];void 0===t&&(t=null)},a.__setGetters=function(t,e){t&&Object.defineProperty(this,"currentTime",{configurable:!0,get:t,set:function(){}}),e&&Object.defineProperty(this,"currentPosition",{configurable:!0,get:e,set:function(){}})},a.__deleteGetters=function(){delete this.currentTime,delete this.currentPosition},a.connect=function(t){return this.outputNode.connect(t),this},a.disconnect=function(t){return this.outputNode.disconnect(t),this},s(t.prototype,a),a=void 0,t}();o.implementsScheduled=function(t){return t.advanceTime&&t.advanceTime instanceof Function},o.implementsTransported=function(t){return t.syncPosition&&t.syncPosition instanceof Function&&t.advancePosition&&t.advancePosition instanceof Function},o.implementsSpeedControlled=function(t){return t.syncSpeed&&t.syncSpeed instanceof Function},o.setScheduled=function(t,e,n,o){t.interface="scheduled",t.__setGetters(n,o),e&&(t.resetNextTime=e)},o.setTransported=function(t,e,n,o){t.interface="transported",t.__setGetters(n,o),e&&(t.resetNextPosition=e)},o.setSpeedControlled=function(t,e,n){t.interface="speed-controlled",t.__setGetters(e,n)},o.resetInterface=function(t){t.__deleteGetters(),delete t.resetNextTime,delete t.resetNextPosition,t.interface=null},e.exports=o},{"audio-context":6}],8:[function(t,e){"use strict";function n(t,e){var n=t.indexOf(e);return n>=0?(t.splice(n,1),!0):!1}var o=t("audio-context"),i=t("priority-queue"),r=t("time-engine"),s=function(){function t(){this.__queue=new i,this.__engines=[],this.__currentTime=null,this.__nextTime=1/0,this.__timeout=null,this.period=.025,this.lookahead=.1}function e(){return this.__currentTime||o.currentTime+this.lookahead}var s=(function(t,e){return t.__proto__={a:e},t.a===e}({},{}),Object.defineProperty),u=Object.getOwnPropertyDescriptor,a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&s(t,n,u(e,n));return t},c=Object.defineProperties,_={};return c(t.prototype,{currentTime:{get:e,configurable:!0,enumerable:!0}}),s(t,"prototype",{configurable:!1,enumerable:!1,writable:!1}),_.__tick=function(){var t=this.__nextTime;for(this.__timeout=null;t<=o.currentTime+this.lookahead;){this.__currentTime=t;var e=this.__queue.head,n=e.advanceTime(this.__currentTime);t=n?this.__queue.move(e,Math.max(n,this.__currentTime)):this.__queue.time}this.__currentTime=null,this.__reschedule(t)},_.__reschedule=function(t){var e=this;if(this.__timeout&&(clearTimeout(this.__timeout),this.__timeout=null),1/0!==t){this.__nextTime=t;var n=Math.max(t-o.currentTime-this.lookahead,this.period);this.__timeout=setTimeout(function(){e.__tick()},1e3*n)}},_.callback=function(t){var e=arguments[1];void 0===e&&(e=0);var n=arguments[2];void 0===n&&(n=0);var o={period:n||1/0,advanceTime:function(e){return t(e),e+this.period}},i=this.__queue.insert(o,this.currentTime+e);return this.__reschedule(i),o},_.add=function(t){var e=arguments[1];void 0===e&&(e=0);var n=arguments[2];void 0===n&&(n=null);var o=this;if(t.interface)throw new Error("object has already been added to a master");if(!r.implementsScheduled(t))throw new Error("object cannot be added to scheduler");this.__engines.push(t),r.setScheduled(t,function(e){var n=o.__queue.move(t,e);o.__reschedule(n)},function(){return o.currentTime},n);var i=this.__queue.insert(t,this.currentTime+e);return this.__reschedule(i),t},_.remove=function(t){if(!n(this.__engines,t))throw new Error("object has not been added to this scheduler");r.resetInterface(t);var e=this.__queue.remove(t);this.__reschedule(e)},_.reset=function(t,e){var n=this.__queue.move(t,e);this.__reschedule(n)},a(t.prototype,_),_=void 0,t}();e.exports=new s},{"audio-context":3,"priority-queue":4,"time-engine":7}],9:[function(t,e){e.exports=t(2)},{}],10:[function(t,e){e.exports=t(3)},{"./ac-monkeypatch":9}],11:[function(t,e){e.exports=t(7)},{"audio-context":10}],12:[function(t,e){"use strict";function n(t,e,n){var o=t.indexOf(n);if(o>=0){var i=e[o];return t.splice(o,1),e.splice(o,1),i}return null}var o=function(t,e){return t.__proto__={a:e},t.a===e}({},{}),i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&i(t,n,r(e,n));return t},u=Object.setPrototypeOf||function(t,e){return o?t.__proto__=e:i(t,"__proto__",{value:e,configurable:!0,enumerable:!1,writable:!0}),t},a=Object.create,c=t("time-engine"),_=t("priority-queue"),h=t("scheduler"),p=function(t){function e(t,e,n,o,i){this.__transport=t,this.__engine=e,this.__startPosition=n,this.__endPosition=o,this.__offsetPosition=i,this.__scalePosition=1,this.__haltPosition=1/0}o||s(e,t);var n={};return null!==t&&u(e,t),e.prototype=a(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.setBoundaries=function(t,e){var n=arguments[2];void 0===n&&(n=t);var o=arguments[3];void 0===o&&(o=1),this.__startPosition=t,this.__endPosition=e,this.__offsetPosition=n,this.__scalePosition=o,this.resetNextPosition()},n.start=function(){},n.stop=function(){},n.syncPosition=function(t,e,n){if(n>0){if(e<this.__startPosition)return null===this.__haltPosition&&this.stop(t,e-this.__offsetPosition),this.__haltPosition=this.__endPosition,this.__startPosition;if(e<=this.__endPosition)return this.start(t,e-this.__offsetPosition,n),this.__haltPosition=null,this.__endPosition}else{if(e>=this.__endPosition)return null===this.__haltPosition&&this.stop(t,e-this.__offsetPosition),this.__haltPosition=this.__startPosition,this.__endPosition;if(e>this.__startPosition)return this.start(t,e-this.__offsetPosition,n),this.__haltPosition=null,this.__startPosition}return null===this.__haltPosition&&this.stop(t,e),this.__haltPosition=1/0,1/0},n.advancePosition=function(t,e,n){var o=this.__haltPosition;return null!==o?(this.start(t,e-this.__offsetPosition,n),this.__haltPosition=null,o):(null===this.__haltPosition&&this.stop(t,e-this.__offsetPosition),this.__haltPosition=1/0,1/0)},n.syncSpeed=function(t,e,n){0===n&&this.stop(t,e-this.__offsetPosition)},n.destroy=function(){this.__transport=null,this.__engine=null},s(e.prototype,n),n=void 0,e}(c),l=function(t){function e(e,n,o,i,r){var s=this;t.call(this,e,n,o,i,r),c.setTransported(n,function(){var t=arguments[0];void 0===t&&(t=null),s.resetNextPosition(t+s.__offsetPosition)},function(){return h.currentTime},function(){return s.__transport.currentPosition-s.__offsetPosition})}o||s(e,t);var n={};return null!==t&&u(e,t),e.prototype=a(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.syncPosition=function(t,e,n){return n>0&&e<this.__endPosition?e=Math.max(e,this.__startPosition):0>n&&e>=this.__startPosition&&(e=Math.min(e,this.__endPosition)),this.__offsetPosition+this.__engine.syncPosition(t,e-this.__offsetPosition,n)},n.advancePosition=function(t,e,n){return e=this.__offsetPosition+this.__engine.advancePosition(t,e-this.__offsetPosition,n),n>0&&e<this.__endPosition||0>n&&e>=this.__startPosition?e:1/0},n.syncSpeed=function(t,e,n){this.__engine.syncSpeed&&this.__engine.syncSpeed(t,e,n)},n.destroy=function(){c.resetInterface(this.__engine),t.prototype.destroy.call(this)},s(e.prototype,n),n=void 0,e}(p),f=function(t){function e(e,n,o,i,r){var s=this;t.call(this,e,n,o,i,r),c.setSpeedControlled(n,function(){return h.currentTime},function(){return s.__transport.currentPosition-s.__offsetPosition})}o||s(e,t);var n={};return null!==t&&u(e,t),e.prototype=a(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.start=function(t,e,n){this.__engine.syncSpeed(t,e,n,!0)},n.stop=function(t,e){this.__engine.syncSpeed(t,e,0)},n.syncSpeed=function(t,e,n){null===this.__haltPosition&&this.__engine.syncSpeed(t,e,n)},n.destroy=function(){this.__engine.syncSpeed(this.__transport.currentTime,this.__transport.currentPosition-this.__offsetPosition,0),c.resetInterface(this.__engine),t.prototype.destroy.call(this)},s(e.prototype,n),n=void 0,e}(p),d=function(t){function e(e,n,o,i,r){var s=this;t.call(this,e,n,o,i,r),h.add(n,1/0,function(){return(s.__transport.currentPosition-s.__offsetPosition)*s.__scalePosition})}o||s(e,t);var n={};return null!==t&&u(e,t),e.prototype=a(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.start=function(t){this.__engine.resetNextTime(t)},n.stop=function(){this.__engine.resetNextTime(1/0)},n.destroy=function(){h.remove(this.__engine),t.prototype.destroy.call(this)},s(e.prototype,n),n=void 0,e}(p),y=function(t){function e(e){t.call(this),this.__transport=e}o||s(e,t);var n={};return null!==t&&u(e,t),e.prototype=a(null!==t?t.prototype:null,{constructor:{value:e,configurable:!0,writable:!0}}),i(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),n.advanceTime=function(t){var e=this.__transport,n=e.__getPositionAtTime(t),o=e.advancePosition(t,n,e.__speed);return 1/0!==o?e.__getTimeAtPosition(o):1/0},s(e.prototype,n),n=void 0,e}(c),m=function(t){function e(t){if(t){if(Array.isArray(t))return 0;var e;if(b&&b(t),"object"==typeof t&&"function"==typeof(e=t[P]))return b&&b(void 0),e.call(t);if(b&&b(void 0),t+""=="[object Generator]")return t}throw new Error(t+" is not iterable")}function r(){t.call(this),this.__engines=[],this.__transported=[],this.__schedulerHook=null,this.__transportQueue=new _,this.__time=0,this.__position=0,this.__speed=0,this.__nextPosition=1/0}function p(){return h.currentTime}function m(){return this.__position+(h.currentTime-this.__time)*this.__speed}o||s(r,t);var v={},P="undefined"!=typeof Symbol&&Symbol&&Symbol.iterator||"@@iterator",b="undefined"!=typeof Symbol&&Symbol&&Symbol.__setObjectSetter__;return null!==t&&u(r,t),r.prototype=a(null!==t?t.prototype:null,{constructor:{value:r,configurable:!0,writable:!0},currentTime:{get:p,configurable:!0,enumerable:!0},currentPosition:{get:m,configurable:!0,enumerable:!0}}),i(r,"prototype",{configurable:!1,enumerable:!1,writable:!1}),v.__getPositionAtTime=function(t){return this.__position+(t-this.__time)*this.__speed},v.__getTimeAtPosition=function(t){return this.__time+(t-this.__position)/this.__speed},v.__syncTransportedPosition=function(t,e,n){var o=this.__transported.length,i=1/0;if(o>0){var r,s;this.__transportQueue.clear(),this.__transportQueue.reverse=0>n;for(var u=o-1;u>0;u--)r=this.__transported[u],s=r.syncPosition(t,e,n),this.__transportQueue.insert(r,s,!1);r=this.__transported[0],s=r.syncPosition(t,e,n),i=this.__transportQueue.insert(r,s,!0)}return i},v.__syncTransportedSpeed=function(t,n,o){var i,r,s,u;u=this.__transported,i=e(u),s=0===i,r=s?u.length:void 0;for(var a;s?r>i:!(r=i.next()).done;)a=s?u[i++]:r.value,a.syncSpeed(t,n,o);i=r=s=u=void 0},v.resetNextPosition=function(t){this.__schedulerHook&&this.__schedulerHook.resetNextTime(this.__getTimeAtPosition(t)),this.__nextPosition=t},v.syncPosition=function(t,e,n){return this.__time=t,this.__position=e,this.__speed=n,this.__syncTransportedPosition(t,e,n)},v.advancePosition=function(t,e,n){var o=this.__transportQueue.head,i=o.advancePosition(t,e,n);return this.__nextPosition=this.__transportQueue.move(o,i),this.__nextPosition},v.syncSpeed=function(t,e,n){var o=arguments[3];void 0===o&&(o=!1);var i=this.__speed;if(this.__time=t,this.__position=e,this.__speed=n,n!==i||o){var r=this.__nextPosition;o||0>n*i?r=this.__syncTransportedPosition(t,e,n):0===i?(r=this.__syncTransportedPosition(t,e,n),this.__schedulerHook=new y(this),h.add(this.__schedulerHook,1/0)):0===n?(r=1/0,this.__syncTransportedSpeed(t,e,0),h.remove(this.__schedulerHook),delete this.__schedulerHook):this.__syncTransportedSpeed(t,e,n),this.resetNextPosition(r)}},v.add=function(t){var e=arguments[1];void 0===e&&(e=-1/0);var n=arguments[2];void 0===n&&(n=1/0);var o=arguments[3];void 0===o&&(o=e);var i=this,r=null;if(o===-1/0&&(o=0),t.interface)throw new Error("object has already been added to a master");if(c.implementsTransported(t))r=new l(this,t,e,n,o);else if(c.implementsSpeedControlled(t))r=new f(this,t,e,n,o);else{if(!c.implementsScheduled(t))throw new Error("object cannot be added to transport");r=new d(this,t,e,n,o)}if(r){var s=this.__speed;if(this.__engines.push(t),this.__transported.push(r),c.setTransported(r,function(){var t=arguments[0];void 0===t&&(t=null);var e=i.__speed;if(0!==e){null===t&&(t=r.syncPosition(i.currentTime,i.currentPosition,e));var n=i.__transportQueue.move(r,t);i.resetNextPosition(n)}},function(){return h.currentTime},function(){return i.__transport.currentPosition-i.__offsetPosition}),0!==s){var u=r.syncPosition(this.currentTime,this.currentPosition,s),a=this.__transportQueue.insert(r,u);this.resetNextPosition(a)}}return r},v.remove=function(t){var e=t,o=n(this.__engines,this.__transported,t);if(o||(e=n(this.__transported,this.__engines,t),o=t),!e||!o)throw new Error("object has not been added to this transport");var i=this.__transportQueue.remove(o);c.resetInterface(o),o.destroy(),0!==this.__speed&&this.resetNextPosition(i)},v.clear=function(){var t,n,o,i;this.syncSpeed(this.currentTime,this.currentPosition,0),i=this.__transported,t=e(i),o=0===t,n=o?i.length:void 0;for(var r;o?n>t:!(n=t.next()).done;)r=o?i[t++]:n.value,c.resetInterface(r),r.destroy();t=n=o=i=void 0},s(r.prototype,v),v=void 0,r}(c);e.exports=m},{"priority-queue":1,scheduler:8,"time-engine":11}]},{},[12])(12)});